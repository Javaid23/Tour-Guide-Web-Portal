import{j as e,u as t,a as n,C as r}from"./index-Cu-NLfXN.js";import{r as o,L as s}from"./router-Dd4lY5Dn.js";import{a,b as i}from"./api-CQ5h52SX.js";import{X as l,O as d,v as c,o as p,Q as x}from"./icons-D1SVnQiw.js";const m=({children:t,requireAuth:n=!0})=>{const[r,a]=o.useState(!1),[i,l]=o.useState(!0);return o.useEffect(()=>{const e=localStorage.getItem("token"),t=localStorage.getItem("user");e&&t&&a(!0),l(!1)},[]),i?e.jsx("div",{className:"flex items-center justify-center p-4",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})}):n&&!r?e.jsxs("div",{className:"text-center p-6 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsx("div",{className:"mb-4",children:e.jsx("svg",{className:"mx-auto h-12 w-12 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.232 15.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("h3",{className:"text-lg font-medium text-yellow-800 mb-2",children:"Login Required"}),e.jsx("p",{className:"text-yellow-700 mb-4",children:"Please login or create an account to make a booking."}),e.jsxs("div",{className:"space-x-3",children:[e.jsx(s,{to:"/auth",className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition-colors",children:"Login / Register"}),e.jsx("button",{onClick:()=>window.history.back(),className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-medium py-2 px-4 rounded-lg transition-colors",children:"Go Back"})]})]}):t},h=({tour:s,isOpen:h,onClose:u,onSubmit:g})=>{const[y,f]=o.useState(1),[b,j]=o.useState({travelers:[{type:"adult",firstName:"",lastName:"",age:"",passport:""}],contactInfo:{email:"",phone:"",address:"",emergencyContact:{name:"",phone:""}},preferences:{dietaryRequirements:"",medicalConditions:"",specialRequests:"",roomPreference:"shared"},paymentMethod:"stripe",cardholderName:"",agreeToTerms:!1,dateOfTravel:""}),[v,k]=o.useState({adults:1,children:0,infants:0}),[C,w]=o.useState(null),[I,S]=o.useState(null),[N,B]=o.useState(!1),[T,z]=o.useState(""),[R,P]=o.useState(!1),[W,A]=o.useState(""),D=t(),L=n(),q=(()=>{const e=s?.price||0,t=e,n=.7*e,r=.1*e;let o=0;switch(b.preferences.roomPreference){case"single":o=50;break;case"double":o=80;break;case"family":o=120;break;default:o=0}const a=v.adults*t+v.children*n+v.infants*r+o,i=.17*a;return{subtotal:a,gst:i,total:a+i,breakdown:{adults:{count:v.adults,price:t,total:v.adults*t},children:{count:v.children,price:n,total:v.children*n},infants:{count:v.infants,price:r,total:v.infants*r},roomExtra:o}}})(),M=(e,t)=>{k(n=>{const r=Math.max(0,n[e]+t);return"adults"===e&&0===r?n:{...n,[e]:r}})};return h?e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:e.jsx("div",{style:{background:"white",borderRadius:"12px",width:"100%",maxWidth:"800px",maxHeight:"90vh",overflow:"auto"},children:e.jsxs(m,{requireAuth:!0,children:[e.jsxs("div",{style:{padding:"24px",borderBottom:"1px solid #e2e8f0",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{margin:0,color:"var(--primary-blue)"},children:"Book Your Tour"}),e.jsx("p",{style:{margin:"4px 0 0 0",color:"#64748b"},children:s?.name})]}),e.jsx("button",{onClick:u,style:{background:"none",border:"none",cursor:"pointer",padding:"8px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(l,{size:24})})]}),e.jsx("div",{style:{padding:"20px 24px",borderBottom:"1px solid #e2e8f0"},children:e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:["Travelers","Contact","Preferences","Payment"].map((t,n)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",flex:1},children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:y>n+1?"#10b981":y===n+1?"var(--primary-blue)":"#e2e8f0",color:y>=n+1?"white":"#64748b",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",fontWeight:"600"},children:n+1}),e.jsx("span",{style:{marginLeft:"8px",fontSize:"14px",color:y>=n+1?"var(--primary-blue)":"#64748b",fontWeight:y===n+1?"600":"400"},children:t}),n<3&&e.jsx("div",{style:{flex:1,height:"2px",background:y>n+1?"#10b981":"#e2e8f0",margin:"0 16px"}})]},t))})}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),A(""),1===y){if(!b.dateOfTravel)return void A("Please select a date of travel.");const e=new Date(b.dateOfTravel),t=new Date;if(t.setHours(0,0,0,0),e<=t)return void A("Date of travel must be in the future.")}if(y<4)return void f(y+1);if("stripe"===b.paymentMethod){B(!0),S(null),w(null),z("");try{const e="destination"===s.type||"destination"===s.category||"Destination"===s.category||s.destinationType||s.location||s.region,t=(await a.post("/api/payments/create-payment-intent",{amount:q.total,currency:"usd",metadata:{email:b.contactInfo.email,name:b.travelers[0]?.firstName+" "+b.travelers[0]?.lastName,...e?{destinationId:s._id}:{tourId:s._id}}})).data.clientSecret,o=L.getElement(r),l=await D.confirmCardPayment(t,{payment_method:{card:o,billing_details:{name:b.travelers[0]?.firstName+" "+b.travelers[0]?.lastName,email:b.contactInfo.email}}});if(l.error)S(l.error.message),B(!1);else if("succeeded"===l.paymentIntent.status){w("success"),B(!1),z("Payment successful! Booking confirmed. You can view your booking in your profile.");try{const t={...e?{destinationId:s._id}:{tourId:s._id},participants:v.adults+v.children+v.infants,date:b.dateOfTravel,name:b.travelers[0]?.firstName+" "+b.travelers[0]?.lastName,email:b.contactInfo.email,phone:b.contactInfo.phone,paymentStatus:"paid",paymentMethod:"stripe",paymentReference:l.paymentIntent.id,stripePaymentIntentId:l.paymentIntent.id,amount:q.total,currency:"usd"};console.log("ðŸ’³ Saving Stripe booking:",t);const n=await i.post("/bookings",t);console.log("âœ… Stripe booking saved:",n.data),setTimeout(()=>{g&&g(b),window.dispatchEvent(new CustomEvent("bookingCreated",{detail:n.data}))},3e3)}catch(n){S("Payment succeeded, but booking could not be saved. Please contact support.")}g&&g(b)}}catch(o){S(o.response?.data?.error||o.message),B(!1)}return}if("cash"===b.paymentMethod){B(!0),S(null),w(null),z("");try{const e="destination"===s.type||"destination"===s.category||"Destination"===s.category||s.destinationType||s.location||s.region,t=localStorage.getItem("token");if(console.log("Auth token present:",!!t),console.log("Token value:",t),!t)return S("Please login to complete your booking. You will be redirected to login page."),setTimeout(()=>{window.location.href="/auth"},2e3),void B(!1);console.log("Item object:",s),console.log("Item ID:",s._id),console.log("Item category:",s.category),console.log("Item type:",s.type),console.log("Item duration:",s.duration),console.log("Item location:",s.location),console.log("Item region:",s.region),console.log("Is destination?",e);const n={...e?{destinationId:s._id}:{tourId:s._id},participants:v.adults+v.children+v.infants,date:b.dateOfTravel,name:b.travelers[0]?.firstName+" "+b.travelers[0]?.lastName,email:b.contactInfo.email,phone:b.contactInfo.phone,paymentStatus:"pending",paymentMethod:"cash",amount:q.total,currency:"usd"};console.log("ðŸ’° Creating cash booking:",n),console.log("ðŸ” Auth token:",!!t);const r=await i.post("/bookings",n);console.log("âœ… Cash booking saved:",r.data),w("success"),B(!1),z("Booking successful! Please pay in cash at our office. You can view your booking in your profile."),setTimeout(()=>{g&&g(b),window.dispatchEvent(new CustomEvent("bookingCreated",{detail:r.data}))},3e3)}catch(n){console.error("Booking error:",n),console.error("Error response:",n.response?.data),console.error("Error status:",n.response?.status),console.error("Full error object:",n),console.error("Request config:",n.config),S(`Booking failed: ${n.response?.data?.message||n.response?.data?.error||n.message||"Unknown error"}`),B(!1)}return}const t="destination"===s.type||"destination"===s.category||"Destination"===s.category||s.destinationType||s.location||s.region;g({...b,pricing:q,...t?{destinationId:s._id}:{tourId:s._id}})},children:[e.jsxs("div",{style:{padding:"24px"},children:[1===y&&e.jsxs("div",{children:[e.jsx("h3",{style:{marginBottom:"20px"},children:"Traveler Information"}),e.jsxs("div",{style:{marginBottom:"24px",padding:"16px",background:"#f8fafc",borderRadius:"8px"},children:[e.jsx("h4",{style:{marginBottom:"16px"},children:"Number of Travelers"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"600"},children:"Adults (12+ years)"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("button",{type:"button",onClick:()=>M("adults",-1),style:{width:"32px",height:"32px",borderRadius:"50%",border:"1px solid #d1d5db",background:"white",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:e.jsx(d,{size:16})}),e.jsx("span",{style:{fontSize:"18px",fontWeight:"600",minWidth:"20px",textAlign:"center"},children:v.adults}),e.jsx("button",{type:"button",onClick:()=>M("adults",1),style:{width:"32px",height:"32px",borderRadius:"50%",border:"1px solid #d1d5db",background:"white",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:e.jsx(c,{size:16})})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"600"},children:"Children (2-11 years)"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("button",{type:"button",onClick:()=>M("children",-1),style:{width:"32px",height:"32px",borderRadius:"50%",border:"1px solid #d1d5db",background:"white",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:e.jsx(d,{size:16})}),e.jsx("span",{style:{fontSize:"18px",fontWeight:"600",minWidth:"20px",textAlign:"center"},children:v.children}),e.jsx("button",{type:"button",onClick:()=>M("children",1),style:{width:"32px",height:"32px",borderRadius:"50%",border:"1px solid #d1d5db",background:"white",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:e.jsx(c,{size:16})})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"600"},children:"Infants (0-1 years)"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("button",{type:"button",onClick:()=>M("infants",-1),style:{width:"32px",height:"32px",borderRadius:"50%",border:"1px solid #d1d5db",background:"white",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:e.jsx(d,{size:16})}),e.jsx("span",{style:{fontSize:"18px",fontWeight:"600",minWidth:"20px",textAlign:"center"},children:v.infants}),e.jsx("button",{type:"button",onClick:()=>M("infants",1),style:{width:"32px",height:"32px",borderRadius:"50%",border:"1px solid #d1d5db",background:"white",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:e.jsx(c,{size:16})})]})]})]})]}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("label",{className:"form-label",children:"Date of Travel *"}),e.jsx("input",{type:"date",className:"form-input",required:!0,value:b.dateOfTravel,onChange:e=>j(t=>({...t,dateOfTravel:e.target.value}))}),W&&e.jsx("div",{style:{color:"red",marginTop:4},children:W})]}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("label",{className:"form-label",children:"Room Preference"}),e.jsxs("select",{className:"form-input",value:b.preferences.roomPreference,onChange:e=>j(t=>({...t,preferences:{...t.preferences,roomPreference:e.target.value}})),children:[e.jsx("option",{value:"shared",children:"Shared accommodation"}),e.jsx("option",{value:"single",children:"Single room (+$50)"}),e.jsx("option",{value:"double",children:"Double room (+$80)"}),e.jsx("option",{value:"family",children:"Family room (+$120)"})]})]}),e.jsxs("div",{style:{marginBottom:"24px",padding:"16px",background:"#f0f9ff",borderRadius:"8px",border:"1px solid #0ea5e9"},children:[e.jsx("h4",{style:{marginBottom:"12px",color:"var(--primary-blue)"},children:"Price Breakdown"}),e.jsxs("div",{style:{fontSize:"14px",lineHeight:"1.6"},children:[q.breakdown.adults.count>0&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[e.jsxs("span",{children:["Adults (",q.breakdown.adults.count," Ã— $ ",q.breakdown.adults.price.toLocaleString(),")"]}),e.jsxs("span",{children:["$ ",q.breakdown.adults.total.toLocaleString()]})]}),q.breakdown.children.count>0&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[e.jsxs("span",{children:["Children (",q.breakdown.children.count," Ã— $ ",q.breakdown.children.price.toLocaleString(),")"]}),e.jsxs("span",{children:["$ ",q.breakdown.children.total.toLocaleString()]})]}),q.breakdown.infants.count>0&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[e.jsxs("span",{children:["Infants (",q.breakdown.infants.count," Ã— $ ",q.breakdown.infants.price.toLocaleString(),")"]}),e.jsxs("span",{children:["$ ",q.breakdown.infants.total.toLocaleString()]})]}),q.breakdown.roomExtra>0&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px",color:"#0ea5e9"},children:[e.jsx("span",{children:"Room Preference Extra"}),e.jsxs("span",{children:["$ ",q.breakdown.roomExtra.toLocaleString()]})]}),e.jsx("hr",{style:{margin:"8px 0",border:"none",borderTop:"1px solid #cbd5e1"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{children:["$ ",q.subtotal.toLocaleString()]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[e.jsx("span",{children:"GST (17%)"}),e.jsxs("span",{children:["$ ",q.gst.toLocaleString()]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"16px",fontWeight:"700",color:"var(--primary-blue)"},children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["$ ",q.total.toLocaleString()]})]})]})]})]}),2===y&&e.jsxs("div",{children:[e.jsx("h3",{style:{marginBottom:"20px"},children:"Contact Information"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Email Address *"}),e.jsx("input",{type:"email",className:"form-input",required:!0,value:b.contactInfo.email,onChange:e=>j(t=>({...t,contactInfo:{...t.contactInfo,email:e.target.value}}))})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[e.jsx("label",{className:"form-label",children:"Phone Number *"}),e.jsx("div",{style:{display:"flex",gap:0,alignItems:"stretch",width:"100%"},children:e.jsx("input",{type:"tel",className:"form-input",required:!0,value:b.contactInfo.phone,onChange:e=>j(t=>({...t,contactInfo:{...t.contactInfo,phone:e.target.value}})),style:{flex:1,minWidth:0,height:"40px",fontSize:"16px",boxSizing:"border-box",padding:"0 8px"}})})]}),e.jsxs("div",{style:{gridColumn:"1 / -1"},children:[e.jsx("label",{className:"form-label",children:"Address"}),e.jsx("textarea",{className:"form-input",rows:"3",value:b.contactInfo.address,onChange:e=>j(t=>({...t,contactInfo:{...t.contactInfo,address:e.target.value}}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Emergency Contact Name"}),e.jsx("input",{type:"text",className:"form-input",value:b.contactInfo.emergencyContact.name,onChange:e=>j(t=>({...t,contactInfo:{...t.contactInfo,emergencyContact:{...t.contactInfo.emergencyContact,name:e.target.value}}}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Emergency Contact Phone"}),e.jsx("input",{type:"tel",className:"form-input",value:b.contactInfo.emergencyContact.phone,onChange:e=>j(t=>({...t,contactInfo:{...t.contactInfo,emergencyContact:{...t.contactInfo.emergencyContact,phone:e.target.value}}}))})]})]})]}),3===y&&e.jsxs("div",{children:[e.jsx("h3",{style:{marginBottom:"20px"},children:"Travel Preferences"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Dietary Requirements"}),e.jsx("textarea",{className:"form-input",rows:"2",placeholder:"Any dietary restrictions or preferences...",value:b.preferences.dietaryRequirements,onChange:e=>j(t=>({...t,preferences:{...t.preferences,dietaryRequirements:e.target.value}}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Medical Conditions"}),e.jsx("textarea",{className:"form-input",rows:"2",placeholder:"Any medical conditions we should be aware of...",value:b.preferences.medicalConditions,onChange:e=>j(t=>({...t,preferences:{...t.preferences,medicalConditions:e.target.value}}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Special Requests"}),e.jsx("textarea",{className:"form-input",rows:"3",placeholder:"Any special requests or requirements for your tour...",value:b.preferences.specialRequests,onChange:e=>j(t=>({...t,preferences:{...t.preferences,specialRequests:e.target.value}}))})]})]})]}),4===y&&e.jsxs("div",{children:[e.jsx("h3",{style:{marginBottom:"20px"},children:"Payment Method"}),e.jsx("div",{style:{marginBottom:"24px"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"16px",border:"2px solid #e2e8f0",borderRadius:"8px",cursor:"pointer"},children:[e.jsx("input",{type:"radio",name:"paymentMethod",value:"stripe",checked:"stripe"===b.paymentMethod,onChange:e=>j(t=>({...t,paymentMethod:e.target.value}))}),e.jsx(p,{size:20,style:{color:"var(--primary-blue)"}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600"},children:"Credit/Debit Card"}),e.jsx("div",{style:{fontSize:"14px",color:"#64748b"},children:"Secure payment via Stripe"})]})]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"16px",border:"2px solid #e2e8f0",borderRadius:"8px",cursor:"pointer"},children:[e.jsx("input",{type:"radio",name:"paymentMethod",value:"cash",checked:"cash"===b.paymentMethod,onChange:e=>j(t=>({...t,paymentMethod:e.target.value}))}),e.jsx(x,{size:20,style:{color:"var(--primary-blue)"}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600"},children:"Cash Payment"}),e.jsx("div",{style:{fontSize:"14px",color:"#64748b"},children:"Pay in cash at our office"})]})]})]})}),"stripe"===b.paymentMethod&&e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("label",{htmlFor:"cardholder-name",style:{fontWeight:"bold",display:"block",marginBottom:8},children:"Cardholder Name"}),e.jsx("input",{id:"cardholder-name",type:"text",className:"form-input",placeholder:"Name on card",value:b.cardholderName,onChange:e=>j(t=>({...t,cardholderName:e.target.value})),style:{marginBottom:12}}),e.jsx("label",{htmlFor:"card-element",style:{fontWeight:"bold"},children:"Card Details"}),e.jsx("div",{style:{border:"1px solid #e5e7eb",borderRadius:"8px",padding:"12px",marginTop:"8px"},children:e.jsx(r,{id:"card-element",options:{hidePostalCode:!0}})}),I&&e.jsx("div",{style:{color:"red",marginTop:8},children:I}),"success"===C&&e.jsx("div",{style:{color:"green",marginTop:8},children:T||"Payment successful! Booking confirmed."})]}),e.jsxs("div",{style:{marginBottom:"24px",padding:"20px",background:"#f8fafc",borderRadius:"8px",border:"2px solid var(--primary-blue)"},children:[e.jsx("h4",{style:{marginBottom:"16px",color:"var(--primary-blue)"},children:"Booking Summary"}),e.jsx("div",{style:{marginBottom:"12px"},children:e.jsx("strong",{children:s?.name})}),e.jsxs("div",{style:{fontSize:"14px",marginBottom:"12px",color:"#64748b"},children:[v.adults+v.children+v.infants," travelers â€¢ ",s?.duration?.days," days"]}),e.jsxs("div",{style:{fontSize:"24px",fontWeight:"700",color:"var(--primary-blue)"},children:["Total: $ ",q.total.toLocaleString()]}),e.jsx("div",{style:{fontSize:"12px",color:"#64748b",marginTop:"4px"},children:"Includes GST and all taxes"})]}),e.jsx("div",{style:{marginBottom:"24px"},children:e.jsxs("label",{style:{display:"inline-flex",alignItems:"center",cursor:"pointer",fontSize:"15px",verticalAlign:"middle",whiteSpace:"nowrap"},children:[e.jsx("input",{type:"checkbox",checked:b.agreeToTerms,onChange:e=>j(t=>({...t,agreeToTerms:e.target.checked})),style:{width:"18px",height:"18px",accentColor:"var(--primary-blue)",verticalAlign:"middle",marginTop:0,marginBottom:0,marginRight:8},required:!0}),e.jsxs("span",{style:{fontSize:"15px",lineHeight:1.6,verticalAlign:"middle"},children:["I agree to the"," ",e.jsx("a",{href:"/terms-and-conditions",style:{color:"var(--primary-blue)",textDecoration:"underline"},target:"_blank",rel:"noopener noreferrer",children:"Terms and Conditions"})," ","and"," ",e.jsx("a",{href:"/cancellation-policy",style:{color:"var(--primary-blue)",textDecoration:"underline"},target:"_blank",rel:"noopener noreferrer",children:"Cancellation Policy"}),"."]})]})})]})]}),e.jsxs("div",{style:{padding:"24px",borderTop:"1px solid #e2e8f0",display:"flex",flexDirection:"column",gap:"12px",alignItems:"stretch"},children:[N&&e.jsx("div",{style:{color:"#0066cc",marginBottom:8,textAlign:"center",fontWeight:600,fontSize:15,backgroundColor:"#eff6ff",padding:"12px",borderRadius:"8px",border:"1px solid #3b82f6"},children:"cash"===b.paymentMethod?"Creating booking...":"Processing payment..."}),"success"===C&&T&&e.jsx("div",{style:{color:"green",marginBottom:8,textAlign:"center",fontWeight:600,fontSize:15,backgroundColor:"#f0f9ff",padding:"12px",borderRadius:"8px",border:"1px solid #10b981"},children:T}),I&&e.jsx("div",{style:{color:"red",marginBottom:8,textAlign:"center",fontWeight:600,fontSize:15},children:I}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{children:y>1&&e.jsx("button",{type:"button",onClick:()=>f(y-1),className:"btn btn-secondary",children:"Previous"})}),e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsx("button",{type:"button",onClick:u,className:"btn btn-secondary",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:4===y&&!b.agreeToTerms||N||"success"===C,children:"success"===C?"Booking Completed!":N?"cash"===b.paymentMethod?"Creating Booking...":"Processing Payment...":4===y?"Complete Booking":"Next Step"})]})]})]})]})]})})}):null};export{h as B};
