import{j as e}from"./index-Cu-NLfXN.js";import{r as l,L as a,b as t}from"./router-Dd4lY5Dn.js";import{t as s}from"./api-CQ5h52SX.js";import{k as i,U as r,e as n,A as o}from"./icons-D1SVnQiw.js";import"./vendor-Z2Iecplj.js";const d=l.memo(({tour:l})=>{console.log("ðŸ·ï¸ TourCard rendering tour:",{id:l._id,title:l.title||l.name});let t=null;return l.images&&l.images[0]&&("string"==typeof l.images[0]?t=l.images[0]:l.images[0]&&"object"==typeof l.images[0]&&l.images[0].url&&(t=l.images[0].url)),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-300 flex flex-col w-full max-w-xs mx-auto border border-slate-200 group",children:[e.jsxs("div",{className:"relative w-full h-48 rounded-t-2xl overflow-hidden",children:[t?e.jsx("img",{src:t,alt:l.name||l.title||"Tour",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500",loading:"lazy"}):e.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center text-gray-400",children:"No Image"}),e.jsx("div",{className:"absolute top-2 left-2 bg-blue-600 text-white text-xs px-3 py-1 rounded-full shadow",children:l.category||"Tour"})]}),e.jsxs("div",{className:"flex flex-col flex-1 p-4 gap-2",children:[e.jsx("h3",{className:"text-lg font-bold text-blue-800 truncate",children:l.name||l.title||"Untitled Tour"}),e.jsx("p",{className:"text-slate-600 text-sm line-clamp-2 min-h-[38px]",children:l.description?.substring(0,90)||"No description."}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-500 mt-1",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(i,{size:14})," ",l.duration?.days||"N/A","d"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(r,{size:14})," ",l.maxGroupSize||"N/A"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(n,{size:14,className:"text-yellow-400"})," ",l.rating?.average?.toFixed(1)||"New"]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsxs("div",{className:"text-xl font-bold text-blue-700",children:["$",l.price?.toLocaleString()||"Contact"]}),e.jsxs(a,{to:l._id?`/tours/${l._id}`:"#",className:"bg-gradient-to-r from-blue-600 to-blue-400 hover:from-blue-700 hover:to-blue-500 text-white px-4 py-2 rounded-xl font-semibold text-sm shadow flex items-center gap-2 transition-all",onClick:e=>{console.log("ðŸ”— Tour card clicked:",{id:l._id,title:l.title||l.name}),l._id?console.log("âœ… Navigating to tour details:",`/tours/${l._id}`):(console.error("âŒ No tour._id found:",l),e.preventDefault(),alert("No tour id found."))},children:["View Details ",e.jsx(o,{size:16})]})]})]})]})});d.displayName="TourCard";const c=()=>{const[a,i]=l.useState("all"),[r,n]=l.useState("all"),[o,c]=l.useState("all"),[x,m]=l.useState("all"),[u,g]=l.useState([]),[h,p]=l.useState(!0),[b,f]=l.useState(null),j=t();l.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"smooth"})},[j]);const y=[{id:"all",name:"All Categories"},{id:"adventure",name:"Adventure"},{id:"cultural",name:"Cultural"},{id:"historical",name:"Historical"},{id:"religious",name:"Religious"}],v=[{id:"all",name:"All Locations"},{id:"gilgit-baltistan",name:"Gilgit-Baltistan"},{id:"punjab",name:"Punjab"},{id:"sindh",name:"Sindh"},{id:"khyber pakhtunkhwa",name:"Khyber Pakhtunkhwa"},{id:"balochistan",name:"Balochistan"},{id:"azad kashmir",name:"Azad Kashmir"},{id:"islamabad",name:"Islamabad"}],N=[{id:"all",name:"All Prices"},{id:"budget",name:"Budget (Under $200)",min:0,max:200},{id:"mid",name:"Mid-Range ($200-500)",min:200,max:500},{id:"premium",name:"Premium ($500-1000)",min:500,max:1e3},{id:"luxury",name:"Luxury ($1000+)",min:1e3,max:9999}],w=[{id:"all",name:"Any Duration"},{id:"short",name:"Short (1-3 days)",min:1,max:3},{id:"medium",name:"Medium (4-7 days)",min:4,max:7},{id:"long",name:"Long (8-14 days)",min:8,max:14},{id:"extended",name:"Extended (15+ days)",min:15,max:999}];l.useEffect(()=>{sessionStorage.clear();(async()=>{try{p(!0),f(null);const e={};"all"!==a&&(e.category=a),"all"!==r&&(e.location=r);const l=await s.getAllTours(e);let t=[];if(t=l?.data?.tours&&Array.isArray(l.data.tours)?l.data.tours:Array.isArray(l.data)?l.data:[],"all"!==o){const e=N.find(e=>e.id===o);e&&(t=t.filter(l=>l.price>=e.min&&l.price<=e.max))}if("all"!==x){const e=w.find(e=>e.id===x);e&&(t=t.filter(l=>{const a=l.duration?.days||l.duration||1;return a>=e.min&&a<=e.max}))}t=Array.isArray(t)?t:[],t=t.filter(e=>"string"==typeof e._id&&e._id.length>0),g(t)}catch(e){f("Failed to fetch tours."),g([]),console.error("Tours fetch error:",e)}finally{p(!1)}})()},[a,r,o,x]);const k=()=>{i("all"),n("all"),c("all"),m("all")};return h?e.jsx("div",{className:"section",children:e.jsx("div",{className:"container text-center",children:e.jsxs("div",{style:{padding:"80px 0"},children:[e.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid #f3f3f3",borderTop:"4px solid var(--primary-blue)",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 20px"}}),e.jsx("p",{style:{fontSize:"18px",color:"#64748b"},children:"Loading amazing tours..."})]})})}):b?e.jsx("div",{className:"section",children:e.jsx("div",{className:"container text-center",children:e.jsxs("div",{style:{padding:"80px 0"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"20px"},children:"âŒ"}),e.jsx("h2",{style:{color:"#ef4444",marginBottom:"16px"},children:"Error Loading Tours"}),e.jsx("p",{style:{fontSize:"18px",color:"#64748b",marginBottom:"32px"},children:b}),e.jsx("button",{onClick:()=>window.location.reload(),className:"btn btn-primary",style:{padding:"12px 24px",fontSize:"16px"},children:"Try Again"})]})})}):e.jsxs("div",{className:"page-tours",children:[e.jsx("section",{style:{background:'linear-gradient(135deg, rgba(30, 64, 175, 0.95) 0%, rgba(59, 130, 246, 0.9) 100%), url("https://images.pexels.com/photos/1118873/pexels-photo-1118873.jpeg") center/cover',padding:"120px 0 80px",position:"relative",overflow:"hidden"},children:e.jsx("div",{className:"container tours-hero",style:{position:"relative",zIndex:2},children:e.jsxs("div",{style:{textAlign:"center",maxWidth:"700px",margin:"0 auto"},children:[e.jsx("h1",{style:{fontSize:"clamp(2.5rem, 5vw, 4rem)",fontWeight:"800",color:"white",marginBottom:"24px",lineHeight:"1.1",textShadow:"0 4px 20px rgba(0, 0, 0, 0.3)"},children:"Tour Packages"}),e.jsx("p",{style:{fontSize:"1.25rem",color:"rgba(255, 255, 255, 0.9)",lineHeight:"1.6",textShadow:"0 2px 10px rgba(0, 0, 0, 0.3)"},children:"Discover carefully crafted tours across Pakistan's stunning landscapes and rich cultural heritage"})]})})}),e.jsx("section",{className:"py-12 bg-gradient-to-br from-blue-50 to-indigo-100",children:e.jsx("div",{className:"container mx-auto px-4 max-w-7xl",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-8 border border-blue-100",children:[e.jsx("h2",{className:"text-3xl font-bold text-center mb-8 text-gray-800",children:"Find Your Perfect Tour"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Category"}),e.jsx("select",{value:a,onChange:e=>i(e.target.value),className:"w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200 bg-white",children:y.map(l=>e.jsx("option",{value:l.id,children:l.name},l.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Location"}),e.jsx("select",{value:r,onChange:e=>n(e.target.value),className:"w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200 bg-white",children:v.map(l=>e.jsx("option",{value:l.id,children:l.name},l.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Price Range"}),e.jsx("select",{value:o,onChange:e=>c(e.target.value),className:"w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200 bg-white",children:N.map(l=>e.jsx("option",{value:l.id,children:l.name},l.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Duration"}),e.jsx("select",{value:x,onChange:e=>m(e.target.value),className:"w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200 bg-white",children:w.map(l=>e.jsx("option",{value:l.id,children:l.name},l.id))})]})]}),("all"!==a||"all"!==r||"all"!==o||"all"!==x)&&e.jsx("div",{className:"mt-6 p-4 bg-blue-50 rounded-xl border border-blue-200",children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between",children:[e.jsxs("div",{className:"flex flex-wrap gap-2 mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-blue-700",children:"Active Filters:"}),"all"!==a&&e.jsx("span",{className:"px-3 py-1 bg-blue-500 text-white text-xs rounded-full",children:y.find(e=>e.id===a)?.name}),"all"!==r&&e.jsx("span",{className:"px-3 py-1 bg-green-500 text-white text-xs rounded-full",children:v.find(e=>e.id===r)?.name}),"all"!==o&&e.jsx("span",{className:"px-3 py-1 bg-purple-500 text-white text-xs rounded-full",children:N.find(e=>e.id===o)?.name}),"all"!==x&&e.jsx("span",{className:"px-3 py-1 bg-orange-500 text-white text-xs rounded-full",children:w.find(e=>e.id===x)?.name})]}),e.jsx("button",{onClick:k,className:"px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white text-sm rounded-lg transition-colors duration-200",children:"Clear All Filters"})]})})]})})}),e.jsx("section",{className:"py-20 bg-gradient-to-br from-gray-50 to-white",children:e.jsx("div",{className:"container mx-auto px-4 max-w-7xl",children:h?e.jsxs("div",{className:"text-center py-20",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-16 w-16 border-4 border-blue-600 border-t-transparent mb-4"}),e.jsx("p",{className:"text-xl text-gray-600",children:"Discovering amazing tours..."})]}):b?e.jsx("div",{className:"max-w-2xl mx-auto text-center py-20",children:e.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-pink-50 border border-red-200 rounded-2xl p-8",children:[e.jsx("div",{className:"text-6xl mb-4",children:"âš ï¸"}),e.jsx("h3",{className:"text-2xl font-bold text-red-700 mb-4",children:"Connection Error"}),e.jsx("p",{className:"text-red-600 mb-6",children:b}),e.jsx("button",{onClick:()=>window.location.reload(),className:"modern-btn modern-btn-primary",children:e.jsx("span",{children:"ðŸ”„ Try Again"})})]})}):0===u.length?e.jsxs("div",{className:"max-w-2xl mx-auto text-center py-20",children:[e.jsx("div",{className:"text-6xl mb-6",children:"ðŸ”"}),e.jsx("h3",{className:"text-3xl font-bold text-gray-800 mb-4",children:"No tours found"}),e.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"all"!==a||"all"!==r||"all"!==o||"all"!==x?"Try adjusting your filters to see more results":"No tours are currently available"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[("all"!==a||"all"!==r||"all"!==o||"all"!==x)&&e.jsx("button",{onClick:k,className:"px-6 py-3 bg-blue-500 hover:bg-blue-600 text-white rounded-xl transition-colors duration-200 font-semibold",children:"ðŸ”„ Reset All Filters"}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-gray-500 hover:bg-gray-600 text-white rounded-xl transition-colors duration-200 font-semibold",children:"ðŸ”„ Refresh Page"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-4xl font-bold mb-4 bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"all"!==a||"all"!==r||"all"!==o||"all"!==x?"Filtered Tour Results":"Discover Amazing Pakistan"}),e.jsx("p",{className:"text-xl text-gray-600",children:0===u.length?"No tours found matching your filters":`Found ${u.length} amazing tour${1!==u.length?"s":""} for you`}),("all"!==a||"all"!==r||"all"!==o||"all"!==x)&&e.jsx("div",{className:"mt-4 text-gray-500",children:e.jsxs("p",{className:"text-sm",children:["all"!==a&&`Category: ${y.find(e=>e.id===a)?.name} â€¢ `,"all"!==r&&`Location: ${v.find(e=>e.id===r)?.name} â€¢ `,"all"!==o&&`Price: ${N.find(e=>e.id===o)?.name} â€¢ `,"all"!==x&&`Duration: ${w.find(e=>e.id===x)?.name}`]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:u.map((l,a)=>e.jsx(d,{tour:l},l._id||a))})]})})})]})};export{c as default};
