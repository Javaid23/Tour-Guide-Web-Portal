import{j as e}from"./index-Cu-NLfXN.js";import{r as t,U as n,t as r,a as i,e as o}from"./router-Dd4lY5Dn.js";import{e as a,c as s,g as l,U as d,a as c,X as u,s as p,m as f,E as h,k as m,o as g,t as x,u as b,v as y,w as v,L as j}from"./icons-D1SVnQiw.js";import{r as w}from"./vendor-Z2Iecplj.js";var S=Object.defineProperty,C=(e,t,n)=>(((e,t,n)=>{t in e?S(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);let k=new class{constructor(){C(this,"current",this.detect()),C(this,"handoffState","pending"),C(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return"server"===this.current}get isClient(){return"client"===this.current}detect(){return"undefined"==typeof window||"undefined"==typeof document?"server":"client"}handoff(){"pending"===this.handoffState&&(this.handoffState="complete")}get isHandoffComplete(){return"complete"===this.handoffState}};function N(e){var t,n;return k.isServer?null:e?"ownerDocument"in e?e.ownerDocument:"current"in e?null!=(n=null==(t=e.current)?void 0:t.ownerDocument)?n:document:null:document}function E(e){"function"==typeof queueMicrotask?queueMicrotask(e):Promise.resolve().then(e).catch(e=>setTimeout(()=>{throw e}))}function A(){let e=[],t={addEventListener:(e,n,r,i)=>(e.addEventListener(n,r,i),t.add(()=>e.removeEventListener(n,r,i))),requestAnimationFrame(...e){let n=requestAnimationFrame(...e);return t.add(()=>cancelAnimationFrame(n))},nextFrame:(...e)=>t.requestAnimationFrame(()=>t.requestAnimationFrame(...e)),setTimeout(...e){let n=setTimeout(...e);return t.add(()=>clearTimeout(n))},microTask(...e){let n={current:!0};return E(()=>{n.current&&e[0]()}),t.add(()=>{n.current=!1})},style(e,t,n){let r=e.style.getPropertyValue(t);return Object.assign(e.style,{[t]:n}),this.add(()=>{Object.assign(e.style,{[t]:r})})},group(e){let t=A();return e(t),this.add(()=>t.dispose())},add:t=>(e.includes(t)||e.push(t),()=>{let n=e.indexOf(t);if(n>=0)for(let t of e.splice(n,1))t()}),dispose(){for(let t of e.splice(0))t()}};return t}function P(){let[e]=t.useState(A);return t.useEffect(()=>()=>e.dispose(),[e]),e}let z=(e,n)=>{k.isServer?t.useEffect(e,n):t.useLayoutEffect(e,n)};function T(e){let n=t.useRef(e);return z(()=>{n.current=e},[e]),n}let R=function(e){let t=T(e);return n.useCallback((...e)=>t.current(...e),[t])},D=t.createContext(void 0);function I(...e){return Array.from(new Set(e.flatMap(e=>"string"==typeof e?e.split(" "):[]))).filter(Boolean).join(" ")}function F(e,t,...n){if(e in t){let r=t[e];return"function"==typeof r?r(...n):r}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(e=>`"${e}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,F),r}var O,W,L=((W=L||{})[W.None=0]="None",W[W.RenderStrategy=1]="RenderStrategy",W[W.Static=2]="Static",W),M=((O=M||{})[O.Unmount=0]="Unmount",O[O.Hidden=1]="Hidden",O);function $(){let e=function(){let e=t.useRef([]),n=t.useCallback(t=>{for(let n of e.current)null!=n&&("function"==typeof n?n(t):n.current=t)},[]);return(...t)=>{if(!t.every(e=>null==e))return e.current=t,n}}();return t.useCallback(t=>function({ourProps:e,theirProps:t,slot:n,defaultTag:r,features:i,visible:o=!0,name:a,mergeRefs:s}){s=null!=s?s:G;let l=U(t,e);if(o)return B(l,n,r,a,s);let d=null!=i?i:0;if(2&d){let{static:e=!1,...t}=l;if(e)return B(t,n,r,a,s)}if(1&d){let{unmount:e=!0,...t}=l;return F(e?0:1,{0:()=>null,1:()=>B({...t,hidden:!0,style:{display:"none"}},n,r,a,s)})}return B(l,n,r,a,s)}({mergeRefs:e,...t}),[e])}function B(e,n={},r,i,o){let{as:a=r,children:s,refName:l="ref",...d}=_(e,["unmount","static"]),c=void 0!==e.ref?{[l]:e.ref}:{},u="function"==typeof s?s(n):s;"className"in d&&d.className&&"function"==typeof d.className&&(d.className=d.className(n)),d["aria-labelledby"]&&d["aria-labelledby"]===d.id&&(d["aria-labelledby"]=void 0);let p={};if(n){let e=!1,t=[];for(let[r,i]of Object.entries(n))"boolean"==typeof i&&(e=!0),!0===i&&t.push(r.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`));if(e){p["data-headlessui-state"]=t.join(" ");for(let e of t)p[`data-${e}`]=""}}if(a===t.Fragment&&(Object.keys(q(d)).length>0||Object.keys(q(p)).length>0)){if(t.isValidElement(u)&&!(Array.isArray(u)&&u.length>1)){let e=u.props,n=null==e?void 0:e.className,r="function"==typeof n?(...e)=>I(n(...e),d.className):I(n,d.className),i=r?{className:r}:{},a=U(u.props,q(_(d,["ref"])));for(let t in p)t in a&&delete p[t];return t.cloneElement(u,Object.assign({},a,p,c,{ref:o(V(u),c.ref)},i))}if(Object.keys(q(d)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${i} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(q(d)).concat(Object.keys(q(p))).map(e=>`  - ${e}`).join("\n"),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(e=>`  - ${e}`).join("\n")].join("\n"))}return t.createElement(a,Object.assign({},_(d,["ref"]),a!==t.Fragment&&c,a!==t.Fragment&&p),u)}function G(...e){return e.every(e=>null==e)?void 0:t=>{for(let n of e)null!=n&&("function"==typeof n?n(t):n.current=t)}}function U(...e){if(0===e.length)return{};if(1===e.length)return e[0];let t={},n={};for(let r of e)for(let e in r)e.startsWith("on")&&"function"==typeof r[e]?(null!=n[e]||(n[e]=[]),n[e].push(r[e])):t[e]=r[e];if(t.disabled||t["aria-disabled"])for(let r in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(r)&&(n[r]=[e=>{var t;return null==(t=null==e?void 0:e.preventDefault)?void 0:t.call(e)}]);for(let r in n)Object.assign(t,{[r](e,...t){let i=n[r];for(let n of i){if((e instanceof Event||(null==e?void 0:e.nativeEvent)instanceof Event)&&e.defaultPrevented)return;n(e,...t)}}});return t}function H(e){var n;return Object.assign(t.forwardRef(e),{displayName:null!=(n=e.displayName)?n:e.name})}function q(e){let t=Object.assign({},e);for(let n in t)void 0===t[n]&&delete t[n];return t}function _(e,t=[]){let n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}function V(e){return n.version.split(".")[0]>="19"?e.props.ref:e.ref}var Y=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(Y||{});let J=H(function(e,t){var n;let{features:r=1,...i}=e,o={ref:t,"aria-hidden":!(2&~r)||(null!=(n=i["aria-hidden"])?n:void 0),hidden:!(4&~r)||void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...!(4&~r)&&!!(2&~r)&&{display:"none"}}};return $()({ourProps:o,theirProps:i,slot:{},defaultTag:"span",name:"Hidden"})});function K(e){return"object"==typeof e&&null!==e&&"nodeType"in e}function X(e){return K(e)&&"tagName"in e}function Z(e){return X(e)&&"accessKey"in e}function Q(e){return X(e)&&"tabIndex"in e}let ee=Symbol();function te(...e){let n=t.useRef(e);t.useEffect(()=>{n.current=e},[e]);let r=R(e=>{for(let t of n.current)null!=t&&("function"==typeof t?t(e):t.current=e)});return e.every(e=>null==e||(null==e?void 0:e[ee]))?void 0:r}let ne=t.createContext(null);function re(){let e=t.useContext(ne);if(null===e){let e=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,re),e}return e}ne.displayName="DescriptionContext";let ie=H(function(e,n){let r=t.useId(),i=t.useContext(D),{id:o=`headlessui-description-${r}`,...a}=e,s=re(),l=te(n);z(()=>s.register(o),[o,s.register]);let d=i||!1,c=t.useMemo(()=>({...s.slot,disabled:d}),[s.slot,d]),u={ref:l,...s.props,id:o};return $()({ourProps:u,theirProps:a,slot:c,defaultTag:"p",name:s.name||"Description"})}),oe=Object.assign(ie,{});var ae,se=((ae=se||{}).Space=" ",ae.Enter="Enter",ae.Escape="Escape",ae.Backspace="Backspace",ae.Delete="Delete",ae.ArrowLeft="ArrowLeft",ae.ArrowUp="ArrowUp",ae.ArrowRight="ArrowRight",ae.ArrowDown="ArrowDown",ae.Home="Home",ae.End="End",ae.PageUp="PageUp",ae.PageDown="PageDown",ae.Tab="Tab",ae);let le=t.createContext(()=>{});function de({value:e,children:t}){return n.createElement(le.Provider,{value:e},t)}let ce=class extends Map{constructor(e){super(),this.factory=e}get(e){let t=super.get(e);return void 0===t&&(t=this.factory(e),this.set(e,t)),t}};var ue,pe,fe,he=Object.defineProperty,me=(e,t,n)=>(((e,t,n)=>{t in e?he(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,t+"",n),n),ge=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},xe=(e,t,n)=>(ge(e,t,"read from private field"),n?n.call(e):t.get(e)),be=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},ye=(e,t,n,r)=>(ge(e,t,"write to private field"),t.set(e,n),n);let ve=class{constructor(e){be(this,ue,{}),be(this,pe,new ce(()=>new Set)),be(this,fe,new Set),me(this,"disposables",A()),ye(this,ue,e),k.isServer&&this.disposables.microTask(()=>{this.dispose()})}dispose(){this.disposables.dispose()}get state(){return xe(this,ue)}subscribe(e,t){if(k.isServer)return()=>{};let n={selector:e,callback:t,current:e(xe(this,ue))};return xe(this,fe).add(n),this.disposables.add(()=>{xe(this,fe).delete(n)})}on(e,t){return k.isServer?()=>{}:(xe(this,pe).get(e).add(t),this.disposables.add(()=>{xe(this,pe).get(e).delete(t)}))}send(e){let t=this.reduce(xe(this,ue),e);if(t!==xe(this,ue)){ye(this,ue,t);for(let e of xe(this,fe)){let t=e.selector(xe(this,ue));je(e.current,t)||(e.current=t,e.callback(t))}for(let t of xe(this,pe).get(e.type))t(xe(this,ue),e)}}};function je(e,t){return!!Object.is(e,t)||"object"==typeof e&&null!==e&&"object"==typeof t&&null!==t&&(Array.isArray(e)&&Array.isArray(t)?e.length===t.length&&we(e[Symbol.iterator](),t[Symbol.iterator]()):e instanceof Map&&t instanceof Map||e instanceof Set&&t instanceof Set?e.size===t.size&&we(e.entries(),t.entries()):!(!Se(e)||!Se(t))&&we(Object.entries(e)[Symbol.iterator](),Object.entries(t)[Symbol.iterator]()))}function we(e,t){for(;;){let n=e.next(),r=t.next();if(n.done&&r.done)return!0;if(n.done||r.done||!Object.is(n.value,r.value))return!1}}function Se(e){if("[object Object]"!==Object.prototype.toString.call(e))return!1;let t=Object.getPrototypeOf(e);return null===t||null===Object.getPrototypeOf(t)}ue=new WeakMap,pe=new WeakMap,fe=new WeakMap;var Ce,ke=Object.defineProperty,Ne=(e,t,n)=>(((e,t,n)=>{t in e?ke(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n),Ee=((Ce=Ee||{})[Ce.Push=0]="Push",Ce[Ce.Pop=1]="Pop",Ce);let Ae={0(e,t){let n=t.id,r=e.stack,i=e.stack.indexOf(n);if(-1!==i){let t=e.stack.slice();return t.splice(i,1),t.push(n),r=t,{...e,stack:r}}return{...e,stack:[...e.stack,n]}},1(e,t){let n=t.id,r=e.stack.indexOf(n);if(-1===r)return e;let i=e.stack.slice();return i.splice(r,1),{...e,stack:i}}},Pe=class e extends ve{constructor(){super(...arguments),Ne(this,"actions",{push:e=>this.send({type:0,id:e}),pop:e=>this.send({type:1,id:e})}),Ne(this,"selectors",{isTop:(e,t)=>e.stack[e.stack.length-1]===t,inStack:(e,t)=>e.stack.includes(t)})}static new(){return new e({stack:[]})}reduce(e,t){return F(t.type,Ae,e,t)}};const ze=new ce(()=>Pe.new());var Te,Re,De={exports:{}},Ie={};var Fe=(Re||(Re=1,De.exports=function(){if(Te)return Ie;Te=1;var e=w(),t="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},n=e.useSyncExternalStore,r=e.useRef,i=e.useEffect,o=e.useMemo,a=e.useDebugValue;return Ie.useSyncExternalStoreWithSelector=function(e,s,l,d,c){var u=r(null);if(null===u.current){var p={hasValue:!1,value:null};u.current=p}else p=u.current;u=o(function(){function e(e){if(!i){if(i=!0,n=e,e=d(e),void 0!==c&&p.hasValue){var o=p.value;if(c(o,e))return r=o}return r=e}if(o=r,t(n,e))return o;var a=d(e);return void 0!==c&&c(o,a)?(n=e,o):(n=e,r=a)}var n,r,i=!1,o=void 0===l?null:l;return[function(){return e(s())},null===o?void 0:function(){return e(o())}]},[s,l,d,c]);var f=n(e,u[0],u[1]);return i(function(){p.hasValue=!0,p.value=f},[f]),a(f),f},Ie}()),De.exports);function Oe(e,t,n=je){return Fe.useSyncExternalStoreWithSelector(R(t=>e.subscribe(We,t)),R(()=>e.state),R(()=>e.state),R(t),n)}function We(e){return e}function Le(e,n){let r=t.useId(),i=ze.get(n),[o,a]=Oe(i,t.useCallback(e=>[i.selectors.isTop(e,r),i.selectors.inStack(e,r)],[i,r]));return z(()=>{if(e)return i.actions.push(r),()=>i.actions.pop(r)},[i,e,r]),!!e&&(!a||o)}let Me=new Map,$e=new Map;function Be(e){var t;let n=null!=(t=$e.get(e))?t:0;return $e.set(e,n+1),0!==n||(Me.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0),()=>Ge(e)}function Ge(e){var t;let n=null!=(t=$e.get(e))?t:1;if(1===n?$e.delete(e):$e.set(e,n-1),1!==n)return;let r=Me.get(e);r&&(null===r["aria-hidden"]?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",r["aria-hidden"]),e.inert=r.inert,Me.delete(e))}let Ue=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),He=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var qe,_e,Ve=((_e=Ve||{})[_e.First=1]="First",_e[_e.Previous=2]="Previous",_e[_e.Next=4]="Next",_e[_e.Last=8]="Last",_e[_e.WrapAround=16]="WrapAround",_e[_e.NoScroll=32]="NoScroll",_e[_e.AutoFocus=64]="AutoFocus",_e),Ye=((qe=Ye||{})[qe.Error=0]="Error",qe[qe.Overflow=1]="Overflow",qe[qe.Success=2]="Success",qe[qe.Underflow=3]="Underflow",qe),Je=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(Je||{});var Ke=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(Ke||{});var Xe=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(Xe||{});function Ze(e){null==e||e.focus({preventScroll:!0})}"undefined"!=typeof window&&"undefined"!=typeof document&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{1===e.detail?delete document.documentElement.dataset.headlessuiFocusVisible:0===e.detail&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));let Qe=["textarea","input"].join(",");function et(e,t,{sorted:n=!0,relativeTo:r=null,skipElements:i=[]}={}){let o=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,a=Array.isArray(e)?n?function(e,t=e=>e){return e.slice().sort((e,n)=>{let r=t(e),i=t(n);if(null===r||null===i)return 0;let o=r.compareDocumentPosition(i);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}(e):e:64&t?function(e=document.body){return null==e?[]:Array.from(e.querySelectorAll(He)).sort((e,t)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(t.tabIndex||Number.MAX_SAFE_INTEGER)))}(e):function(e=document.body){return null==e?[]:Array.from(e.querySelectorAll(Ue)).sort((e,t)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(t.tabIndex||Number.MAX_SAFE_INTEGER)))}(e);i.length>0&&a.length>1&&(a=a.filter(e=>!i.some(t=>null!=t&&"current"in t?(null==t?void 0:t.current)===e:t===e))),r=null!=r?r:o.activeElement;let s,l=(()=>{if(5&t)return 1;if(10&t)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),d=(()=>{if(1&t)return 0;if(2&t)return Math.max(0,a.indexOf(r))-1;if(4&t)return Math.max(0,a.indexOf(r))+1;if(8&t)return a.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=32&t?{preventScroll:!0}:{},u=0,p=a.length;do{if(u>=p||u+p<=0)return 0;let e=d+u;if(16&t)e=(e+p)%p;else{if(e<0)return 3;if(e>=p)return 1}s=a[e],null==s||s.focus(c),u+=l}while(s!==o.activeElement);return 6&t&&function(e){var t,n;return null!=(n=null==(t=null==e?void 0:e.matches)?void 0:t.call(e,Qe))&&n}(s)&&s.select(),2}function tt(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function nt(){return tt()||/Android/gi.test(window.navigator.userAgent)}function rt(e,n,r,i){let o=T(r);t.useEffect(()=>{if(e)return document.addEventListener(n,t,i),()=>document.removeEventListener(n,t,i);function t(e){o.current(e)}},[e,n,i])}function it(e,n,r,i){let o=T(r);t.useEffect(()=>{if(e)return window.addEventListener(n,t,i),()=>window.removeEventListener(n,t,i);function t(e){o.current(e)}},[e,n,i])}function ot(e,n,r){let i=T(r),o=t.useCallback(function(e,t){if(e.defaultPrevented)return;let r=t(e);if(null===r||!r.getRootNode().contains(r)||!r.isConnected)return;let o=function e(t){return"function"==typeof t?e(t()):Array.isArray(t)||t instanceof Set?t:[t]}(n);for(let n of o)if(null!==n&&(n.contains(r)||e.composed&&e.composedPath().includes(n)))return;return!function(e,t=0){var n;return e!==(null==(n=N(e))?void 0:n.body)&&F(t,{0:()=>e.matches(Ue),1(){let t=e;for(;null!==t;){if(t.matches(Ue))return!0;t=t.parentElement}return!1}})}(r,Ke.Loose)&&-1!==r.tabIndex&&e.preventDefault(),i.current(e,r)},[i,n]),a=t.useRef(null);rt(e,"pointerdown",e=>{var t,n;nt()||(a.current=(null==(n=null==(t=e.composedPath)?void 0:t.call(e))?void 0:n[0])||e.target)},!0),rt(e,"pointerup",e=>{if(nt()||!a.current)return;let t=a.current;return a.current=null,o(e,()=>t)},!0);let s=t.useRef({x:0,y:0});rt(e,"touchstart",e=>{s.current.x=e.touches[0].clientX,s.current.y=e.touches[0].clientY},!0),rt(e,"touchend",e=>{let t=e.changedTouches[0].clientX,n=e.changedTouches[0].clientY;if(!(Math.abs(t-s.current.x)>=30||Math.abs(n-s.current.y)>=30))return o(e,()=>Q(e.target)?e.target:null)},!0),it(e,"blur",e=>o(e,()=>function(e){return Z(e)&&"IFRAME"===e.nodeName}(window.document.activeElement)?window.document.activeElement:null),!0)}function at(...e){return t.useMemo(()=>N(...e),[...e])}function st(e,n,r,i){let o=T(r);t.useEffect(()=>{function t(e){o.current(e)}return(e=null!=e?e:window).addEventListener(n,t,i),()=>e.removeEventListener(n,t,i)},[e,n,i])}function lt(){let e;return{before({doc:t}){var n;let r=t.documentElement,i=null!=(n=t.defaultView)?n:window;e=Math.max(0,i.innerWidth-r.clientWidth)},after({doc:t,d:n}){let r=t.documentElement,i=Math.max(0,r.clientWidth-r.offsetWidth),o=Math.max(0,e-i);n.style(r,"paddingRight",`${o}px`)}}}function dt(){return tt()?{before({doc:e,d:t,meta:n}){function r(e){return n.containers.flatMap(e=>e()).some(t=>t.contains(e))}t.microTask(()=>{var n;if("auto"!==window.getComputedStyle(e.documentElement).scrollBehavior){let n=A();n.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>n.dispose()))}let i=null!=(n=window.scrollY)?n:window.pageYOffset,o=null;t.addEventListener(e,"click",t=>{if(Q(t.target))try{let n=t.target.closest("a");if(!n)return;let{hash:i}=new URL(n.href),a=e.querySelector(i);Q(a)&&!r(a)&&(o=a)}catch{}},!0),t.addEventListener(e,"touchstart",e=>{if(Q(e.target)&&function(e){return X(e)&&"style"in e}(e.target))if(r(e.target)){let n=e.target;for(;n.parentElement&&r(n.parentElement);)n=n.parentElement;t.style(n,"overscrollBehavior","contain")}else t.style(e.target,"touchAction","none")}),t.addEventListener(e,"touchmove",e=>{if(Q(e.target)){if(function(e){return Z(e)&&"INPUT"===e.nodeName}(e.target))return;if(r(e.target)){let t=e.target;for(;t.parentElement&&""!==t.dataset.headlessuiPortal&&!(t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth);)t=t.parentElement;""===t.dataset.headlessuiPortal&&e.preventDefault()}else e.preventDefault()}},{passive:!1}),t.add(()=>{var e;let t=null!=(e=window.scrollY)?e:window.pageYOffset;i!==t&&window.scrollTo(0,i),o&&o.isConnected&&(o.scrollIntoView({block:"nearest"}),o=null)})})}}:{}}function ct(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let ut=function(e,t){let n=e(),r=new Set;return{getSnapshot:()=>n,subscribe:e=>(r.add(e),()=>r.delete(e)),dispatch(e,...i){let o=t[e].call(n,...i);o&&(n=o,r.forEach(e=>e()))}}}(()=>new Map,{PUSH(e,t){var n;let r=null!=(n=this.get(e))?n:{doc:e,count:0,d:A(),meta:new Set};return r.count++,r.meta.add(t),this.set(e,r),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:n}){let r={doc:e,d:t,meta:ct(n)},i=[dt(),lt(),{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}];i.forEach(({before:e})=>null==e?void 0:e(r)),i.forEach(({after:e})=>null==e?void 0:e(r))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});function pt(e,n,r=()=>({containers:[]})){let i=function(e){return t.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}(ut),o=n?i.get(n):void 0,a=!!o&&o.count>0;return z(()=>{if(n&&e)return ut.dispatch("PUSH",n,r),()=>ut.dispatch("POP",n,r)},[e,n]),a}ut.subscribe(()=>{let e=ut.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let e="hidden"===t.get(n.doc),r=0!==n.count;(r&&!e||!r&&e)&&ut.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),0===n.count&&ut.dispatch("TEARDOWN",n)}});var ft,ht;"undefined"!=typeof process&&"undefined"!=typeof globalThis&&"undefined"!=typeof Element&&"test"===(null==(ft=null==process?void 0:{})?void 0:ft.NODE_ENV)&&void 0===(null==(ht=null==Element?void 0:Element.prototype)?void 0:ht.getAnimations)&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join("\n")),[]});var mt=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(mt||{});function gt(e){let t={};for(let n in e)!0===e[n]&&(t[`data-${n}`]="");return t}function xt(e,n,r,i){let[o,a]=t.useState(r),{hasFlag:s,addFlag:l,removeFlag:d}=function(e=0){let[n,r]=t.useState(e),i=t.useCallback(e=>r(e),[n]),o=t.useCallback(e=>r(t=>t|e),[n]),a=t.useCallback(e=>(n&e)===e,[n]),s=t.useCallback(e=>r(t=>t&~e),[r]),l=t.useCallback(e=>r(t=>t^e),[r]);return{flags:n,setFlag:i,addFlag:o,hasFlag:a,removeFlag:s,toggleFlag:l}}(e&&o?3:0),c=t.useRef(!1),u=t.useRef(!1),p=P();return z(()=>{var t;if(e)return r&&a(!0),n?(null==(t=null==i?void 0:i.start)||t.call(i,r),function(e,{prepare:t,run:n,done:r,inFlight:i}){let o=A();return function(e,{inFlight:t,prepare:n}){if(null!=t&&t.current)return void n();let r=e.style.transition;e.style.transition="none",n(),e.offsetHeight,e.style.transition=r}(e,{prepare:t,inFlight:i}),o.nextFrame(()=>{n(),o.requestAnimationFrame(()=>{o.add(function(e,t){var n,r;let i=A();if(!e)return i.dispose;let o=!1;i.add(()=>{o=!0});let a=null!=(r=null==(n=e.getAnimations)?void 0:n.call(e).filter(e=>e instanceof CSSTransition))?r:[];return 0===a.length?(t(),i.dispose):(Promise.allSettled(a.map(e=>e.finished)).then(()=>{o||t()}),i.dispose)}(e,r))})}),o.dispose}(n,{inFlight:c,prepare(){u.current?u.current=!1:u.current=c.current,c.current=!0,!u.current&&(r?(l(3),d(4)):(l(4),d(2)))},run(){u.current?r?(d(3),l(4)):(d(4),l(3)):r?d(1):l(1)},done(){var e;u.current&&"function"==typeof n.getAnimations&&n.getAnimations().length>0||(c.current=!1,d(7),r||a(!1),null==(e=null==i?void 0:i.end)||e.call(i,r))}})):void(r&&l(3))},[e,r,n,p]),e?[o,{closed:s(1),enter:s(2),leave:s(4),transition:s(2)||s(4)}]:[r,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function bt(e,n){let r=t.useRef([]),i=R(e);t.useEffect(()=>{let e=[...r.current];for(let[t,o]of n.entries())if(r.current[t]!==o){let t=i(n,e);return r.current=n,t}},[i,...n])}let yt=t.createContext(null);yt.displayName="OpenClosedContext";var vt=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(vt||{});function jt(){return t.useContext(yt)}function wt({value:e,children:t}){return n.createElement(yt.Provider,{value:e},t)}function St({children:e}){return n.createElement(yt.Provider,{value:null},e)}let Ct=[];function kt(e){let n=R(e),r=t.useRef(!1);t.useEffect(()=>(r.current=!1,()=>{r.current=!0,E(()=>{r.current&&n()})}),[n])}function Nt(){let e=function(){let e="undefined"==typeof document;return"useSyncExternalStore"in r&&r.useSyncExternalStore(()=>()=>{},()=>!1,()=>!e)}(),[n,i]=t.useState(k.isHandoffComplete);return n&&!1===k.isHandoffComplete&&i(!1),t.useEffect(()=>{!0!==n&&i(!0)},[n]),t.useEffect(()=>k.handoff(),[]),!e&&n}!function(e){function t(){"loading"!==document.readyState&&(e(),document.removeEventListener("DOMContentLoaded",t))}"undefined"!=typeof window&&"undefined"!=typeof document&&(document.addEventListener("DOMContentLoaded",t),t())}(()=>{function e(e){if(!Q(e.target)||e.target===document.body||Ct[0]===e.target)return;let t=e.target;t=t.closest(Ue),Ct.unshift(null!=t?t:e.target),Ct=Ct.filter(e=>null!=e&&e.isConnected),Ct.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});let Et=t.createContext(!1);function At(e){return n.createElement(Et.Provider,{value:e.force},e.children)}function Pt(e){let n=t.useContext(Et),r=t.useContext(Dt),[i,o]=t.useState(()=>{var t;if(!n&&null!==r)return null!=(t=r.current)?t:null;if(k.isServer)return null;let i=null==e?void 0:e.getElementById("headlessui-portal-root");if(i)return i;if(null===e)return null;let o=e.createElement("div");return o.setAttribute("id","headlessui-portal-root"),e.body.appendChild(o)});return t.useEffect(()=>{null!==i&&(null!=e&&e.body.contains(i)||null==e||e.body.appendChild(i))},[i,e]),t.useEffect(()=>{n||null!==r&&o(r.current)},[r,o,n]),i}let zt=t.Fragment,Tt=H(function(e,n){let{ownerDocument:r=null,...o}=e,a=t.useRef(null),s=te(function(e,t=!0){return Object.assign(e,{[ee]:t})}(e=>{a.current=e}),n),l=at(a),d=null!=r?r:l,c=Pt(d),[u]=t.useState(()=>{var e;return k.isServer?null:null!=(e=null==d?void 0:d.createElement("div"))?e:null}),p=t.useContext(It),f=Nt();z(()=>{!c||!u||c.contains(u)||(u.setAttribute("data-headlessui-portal",""),c.appendChild(u))},[c,u]),z(()=>{if(u&&p)return p.register(u)},[p,u]),kt(()=>{var e;!c||!u||(K(u)&&c.contains(u)&&c.removeChild(u),c.childNodes.length<=0&&(null==(e=c.parentElement)||e.removeChild(c)))});let h=$();return f&&c&&u?i.createPortal(h({ourProps:{ref:s},theirProps:o,slot:{},defaultTag:zt,name:"Portal"}),u):null});let Rt=t.Fragment,Dt=t.createContext(null);let It=t.createContext(null);let Ft=H(function(e,t){let r=te(t),{enabled:i=!0,ownerDocument:o,...a}=e,s=$();return i?n.createElement(Tt,{...a,ownerDocument:o,ref:r}):s({ourProps:{ref:r},theirProps:a,slot:{},defaultTag:zt,name:"Portal"})}),Ot=H(function(e,t){let{target:r,...i}=e,o={ref:te(t)},a=$();return n.createElement(Dt.Provider,{value:r},a({ourProps:o,theirProps:i,defaultTag:Rt,name:"Popover.Group"}))}),Wt=Object.assign(Ft,{Group:Ot});let Lt=t.createContext(null);function Mt({children:e,node:r}){let[i,o]=t.useState(null),a=$t(null!=r?r:i);return n.createElement(Lt.Provider,{value:a},e,null===a&&n.createElement(J,{features:Y.Hidden,ref:e=>{var t,n;if(e)for(let r of null!=(n=null==(t=N(e))?void 0:t.querySelectorAll("html > *, body > *"))?n:[])if(r!==document.body&&r!==document.head&&X(r)&&null!=r&&r.contains(e)){o(r);break}}}))}function $t(e=null){var n;return null!=(n=t.useContext(Lt))?n:e}function Bt(){let e=t.useRef(!1);return z(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var Gt=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Gt||{});function Ut(e){if(!e)return new Set;if("function"==typeof e)return new Set(e());let t=new Set;for(let n of e.current)X(n.current)&&t.add(n.current);return t}var Ht=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(Ht||{});let qt=H(function(e,r){let i=t.useRef(null),o=te(i,r),{initialFocus:a,initialFocusFallback:s,containers:l,features:d=15,...c}=e;Nt()||(d=0);let u=at(i);!function(e,{ownerDocument:n}){let r=!!(8&e),i=function(e=!0){let n=t.useRef(Ct.slice());return bt(([e],[t])=>{!0===t&&!1===e&&E(()=>{n.current.splice(0)}),!1===t&&!0===e&&(n.current=Ct.slice())},[e,Ct,n]),R(()=>{var e;return null!=(e=n.current.find(e=>null!=e&&e.isConnected))?e:null})}(r);bt(()=>{r||(null==n?void 0:n.activeElement)===(null==n?void 0:n.body)&&Ze(i())},[r]),kt(()=>{r&&Ze(i())})}(d,{ownerDocument:u});let p=function(e,{ownerDocument:n,container:r,initialFocus:i,initialFocusFallback:o}){let a=t.useRef(null),s=Le(!!(1&e),"focus-trap#initial-focus"),l=Bt();return bt(()=>{if(0===e)return;if(!s)return void(null!=o&&o.current&&Ze(o.current));let t=r.current;t&&E(()=>{if(!l.current)return;let r=null==n?void 0:n.activeElement;if(null!=i&&i.current){if((null==i?void 0:i.current)===r)return void(a.current=r)}else if(t.contains(r))return void(a.current=r);if(null!=i&&i.current)Ze(i.current);else{if(16&e){if(et(t,Ve.First|Ve.AutoFocus)!==Ye.Error)return}else if(et(t,Ve.First)!==Ye.Error)return;if(null!=o&&o.current&&(Ze(o.current),(null==n?void 0:n.activeElement)===o.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}a.current=null==n?void 0:n.activeElement})},[o,s,e]),a}(d,{ownerDocument:u,container:i,initialFocus:a,initialFocusFallback:s});!function(e,{ownerDocument:t,container:n,containers:r,previousActiveElement:i}){let o=Bt(),a=!!(4&e);st(null==t?void 0:t.defaultView,"focus",e=>{if(!a||!o.current)return;let t=Ut(r);Z(n.current)&&t.add(n.current);let s=i.current;if(!s)return;let l=e.target;Z(l)?Vt(t,l)?(i.current=l,Ze(l)):(e.preventDefault(),e.stopPropagation(),Ze(s)):Ze(i.current)},!0)}(d,{ownerDocument:u,container:i,containers:l,previousActiveElement:p});let f=function(){let e=t.useRef(0);return it(!0,"keydown",t=>{"Tab"===t.key&&(e.current=t.shiftKey?1:0)},!0),e}(),h=R(e=>{if(!Z(i.current))return;let t=i.current;F(f.current,{[Gt.Forwards]:()=>{et(t,Ve.First,{skipElements:[e.relatedTarget,s]})},[Gt.Backwards]:()=>{et(t,Ve.Last,{skipElements:[e.relatedTarget,s]})}})}),m=Le(!!(2&d),"focus-trap#tab-lock"),g=P(),x=t.useRef(!1),b={ref:o,onKeyDown(e){"Tab"==e.key&&(x.current=!0,g.requestAnimationFrame(()=>{x.current=!1}))},onBlur(e){if(!(4&d))return;let t=Ut(l);Z(i.current)&&t.add(i.current);let n=e.relatedTarget;Q(n)&&"true"!==n.dataset.headlessuiFocusGuard&&(Vt(t,n)||(x.current?et(i.current,F(f.current,{[Gt.Forwards]:()=>Ve.Next,[Gt.Backwards]:()=>Ve.Previous})|Ve.WrapAround,{relativeTo:e.target}):Q(e.target)&&Ze(e.target)))}},y=$();return n.createElement(n.Fragment,null,m&&n.createElement(J,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:h,features:Y.Focusable}),y({ourProps:b,theirProps:c,defaultTag:"div",name:"FocusTrap"}),m&&n.createElement(J,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:h,features:Y.Focusable}))}),_t=Object.assign(qt,{features:Ht});function Vt(e,t){for(let n of e)if(n.contains(t))return!0;return!1}function Yt(e){var r;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||(null!=(r=e.as)?r:en)!==t.Fragment||1===n.Children.count(e.children)}let Jt=t.createContext(null);Jt.displayName="TransitionContext";var Kt=(e=>(e.Visible="visible",e.Hidden="hidden",e))(Kt||{});let Xt=t.createContext(null);function Zt(e){return"children"in e?Zt(e.children):e.current.filter(({el:e})=>null!==e.current).filter(({state:e})=>"visible"===e).length>0}function Qt(e,n){let r=T(e),i=t.useRef([]),o=Bt(),a=P(),s=R((e,t=M.Hidden)=>{let n=i.current.findIndex(({el:t})=>t===e);-1!==n&&(F(t,{[M.Unmount](){i.current.splice(n,1)},[M.Hidden](){i.current[n].state="hidden"}}),a.microTask(()=>{var e;!Zt(i)&&o.current&&(null==(e=r.current)||e.call(r))}))}),l=R(e=>{let t=i.current.find(({el:t})=>t===e);return t?"visible"!==t.state&&(t.state="visible"):i.current.push({el:e,state:"visible"}),()=>s(e,M.Unmount)}),d=t.useRef([]),c=t.useRef(Promise.resolve()),u=t.useRef({enter:[],leave:[]}),p=R((e,t,r)=>{d.current.splice(0),n&&(n.chains.current[t]=n.chains.current[t].filter(([t])=>t!==e)),null==n||n.chains.current[t].push([e,new Promise(e=>{d.current.push(e)})]),null==n||n.chains.current[t].push([e,new Promise(e=>{Promise.all(u.current[t].map(([e,t])=>t)).then(()=>e())})]),"enter"===t?c.current=c.current.then(()=>null==n?void 0:n.wait.current).then(()=>r(t)):r(t)}),f=R((e,t,n)=>{Promise.all(u.current[t].splice(0).map(([e,t])=>t)).then(()=>{var e;null==(e=d.current.shift())||e()}).then(()=>n(t))});return t.useMemo(()=>({children:i,register:l,unregister:s,onStart:p,onStop:f,wait:c,chains:u}),[l,s,i,p,f,u,c])}Xt.displayName="NestingContext";let en=t.Fragment,tn=L.RenderStrategy;let nn=H(function(e,r){let{show:i,appear:o=!1,unmount:a=!0,...s}=e,l=t.useRef(null),d=te(...Yt(e)?[l,r]:null===r?[]:[r]);Nt();let c=jt();if(void 0===i&&null!==c&&(i=(c&vt.Open)===vt.Open),void 0===i)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[u,p]=t.useState(i?"visible":"hidden"),f=Qt(()=>{i||p("hidden")}),[h,m]=t.useState(!0),g=t.useRef([i]);z(()=>{!1!==h&&g.current[g.current.length-1]!==i&&(g.current.push(i),m(!1))},[g,i]);let x=t.useMemo(()=>({show:i,appear:o,initial:h}),[i,o,h]);z(()=>{i?p("visible"):!Zt(f)&&null!==l.current&&p("hidden")},[i,f]);let b={unmount:a},y=R(()=>{var t;h&&m(!1),null==(t=e.beforeEnter)||t.call(e)}),v=R(()=>{var t;h&&m(!1),null==(t=e.beforeLeave)||t.call(e)}),j=$();return n.createElement(Xt.Provider,{value:f},n.createElement(Jt.Provider,{value:x},j({ourProps:{...b,as:t.Fragment,children:n.createElement(rn,{ref:d,...b,...s,beforeEnter:y,beforeLeave:v})},theirProps:{},defaultTag:t.Fragment,features:tn,visible:"visible"===u,name:"Transition"})))}),rn=H(function(e,r){var i,o;let{transition:a=!0,beforeEnter:s,afterEnter:l,beforeLeave:d,afterLeave:c,enter:u,enterFrom:p,enterTo:f,entered:h,leave:m,leaveFrom:g,leaveTo:x,...b}=e,[y,v]=t.useState(null),j=t.useRef(null),w=Yt(e),S=te(...w?[j,r,v]:null===r?[]:[r]),C=null==(i=b.unmount)||i?M.Unmount:M.Hidden,{show:k,appear:N,initial:E}=function(){let e=t.useContext(Jt);if(null===e)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}(),[A,P]=t.useState(k?"visible":"hidden"),T=function(){let e=t.useContext(Xt);if(null===e)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}(),{register:D,unregister:O}=T;z(()=>D(j),[D,j]),z(()=>{if(C===M.Hidden&&j.current)return k&&"visible"!==A?void P("visible"):F(A,{hidden:()=>O(j),visible:()=>D(j)})},[A,j,D,O,k,C]);let W=Nt();z(()=>{if(w&&W&&"visible"===A&&null===j.current)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[j,A,W,w]);let L=E&&!N,B=N&&k&&E,G=t.useRef(!1),U=Qt(()=>{G.current||(P("hidden"),O(j))},T),H=R(e=>{G.current=!0;let t=e?"enter":"leave";U.onStart(j,t,e=>{"enter"===e?null==s||s():"leave"===e&&(null==d||d())})}),_=R(e=>{let t=e?"enter":"leave";G.current=!1,U.onStop(j,t,e=>{"enter"===e?null==l||l():"leave"===e&&(null==c||c())}),"leave"===t&&!Zt(U)&&(P("hidden"),O(j))});t.useEffect(()=>{w&&a||(H(k),_(k))},[k,w,a]);let V=(()=>!(!a||!w||!W||L))(),[,Y]=xt(V,y,k,{start:H,end:_}),J=q({ref:S,className:(null==(o=I(b.className,B&&u,B&&p,Y.enter&&u,Y.enter&&Y.closed&&p,Y.enter&&!Y.closed&&f,Y.leave&&m,Y.leave&&!Y.closed&&g,Y.leave&&Y.closed&&x,!Y.transition&&k&&h))?void 0:o.trim())||void 0,...gt(Y)}),K=0;"visible"===A&&(K|=vt.Open),"hidden"===A&&(K|=vt.Closed),k&&"hidden"===A&&(K|=vt.Opening),!k&&"visible"===A&&(K|=vt.Closing);let X=$();return n.createElement(Xt.Provider,{value:U},n.createElement(wt,{value:K},X({ourProps:J,theirProps:b,defaultTag:en,features:tn,visible:"visible"===A,name:"Transition.Child"})))}),on=H(function(e,r){let i=null!==t.useContext(Jt),o=null!==jt();return n.createElement(n.Fragment,null,!i&&o?n.createElement(nn,{ref:r,...e}):n.createElement(rn,{ref:r,...e}))}),an=Object.assign(nn,{Child:on,Root:nn});var sn=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(sn||{}),ln=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(ln||{});let dn={0:(e,t)=>e.titleId===t.id?e:{...e,titleId:t.id}},cn=t.createContext(null);function un(e){let n=t.useContext(cn);if(null===n){let t=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,un),t}return n}function pn(e,t){return F(t.type,dn,e,t)}cn.displayName="DialogContext";let fn=H(function(e,r){let i=t.useId(),{id:o=`headlessui-dialog-${i}`,open:a,onClose:s,initialFocus:l,role:d="dialog",autoFocus:c=!0,__demoMode:u=!1,unmount:p=!1,...f}=e,h=t.useRef(!1);d="dialog"===d||"alertdialog"===d?d:(h.current||(h.current=!0,console.warn(`Invalid role [${d}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog");let m=jt();void 0===a&&null!==m&&(a=(m&vt.Open)===vt.Open);let g=t.useRef(null),x=te(g,r),b=at(g),y=a?0:1,[v,j]=t.useReducer(pn,{titleId:null,descriptionId:null,panelRef:t.createRef()}),w=R(()=>s(!1)),S=R(e=>j({type:0,id:e})),C=!!Nt()&&0===y,[k,E]=function(){let e=t.useContext(It),r=t.useRef([]),i=R(t=>(r.current.push(t),e&&e.register(t),()=>o(t))),o=R(t=>{let n=r.current.indexOf(t);-1!==n&&r.current.splice(n,1),e&&e.unregister(t)}),a=t.useMemo(()=>({register:i,unregister:o,portals:r}),[i,o,r]);return[r,t.useMemo(()=>function({children:e}){return n.createElement(It.Provider,{value:a},e)},[a])]}(),P={get current(){var e;return null!=(e=v.panelRef.current)?e:g.current}},D=$t(),{resolveContainers:I}=function({defaultContainers:e=[],portals:t,mainTreeNode:n}={}){let r=at(n),i=R(()=>{var i,o;let a=[];for(let t of e)null!==t&&(X(t)?a.push(t):"current"in t&&X(t.current)&&a.push(t.current));if(null!=t&&t.current)for(let e of t.current)a.push(e);for(let e of null!=(i=null==r?void 0:r.querySelectorAll("html > *, body > *"))?i:[])e!==document.body&&e!==document.head&&X(e)&&"headlessui-portal-root"!==e.id&&(n&&(e.contains(n)||e.contains(null==(o=null==n?void 0:n.getRootNode())?void 0:o.host))||a.some(t=>e.contains(t))||a.push(e));return a});return{resolveContainers:i,contains:R(e=>i().some(t=>t.contains(e)))}}({mainTreeNode:D,portals:k,defaultContainers:[P]}),F=null!==m&&(m&vt.Closing)===vt.Closing;!function(e,{allowed:t,disallowed:n}={}){let r=Le(e,"inert-others");z(()=>{var e,i;if(!r)return;let o=A();for(let t of null!=(e=null==n?void 0:n())?e:[])t&&o.add(Be(t));let a=null!=(i=null==t?void 0:t())?i:[];for(let t of a){if(!t)continue;let e=N(t);if(!e)continue;let n=t.parentElement;for(;n&&n!==e.body;){for(let e of n.children)a.some(t=>e.contains(t))||o.add(Be(e));n=n.parentElement}}return o.dispose},[r,t,n])}(!u&&!F&&C,{allowed:R(()=>{var e,t;return[null!=(t=null==(e=g.current)?void 0:e.closest("[data-headlessui-portal]"))?t:null]}),disallowed:R(()=>{var e;return[null!=(e=null==D?void 0:D.closest("body > *:not(#headlessui-portal-root)"))?e:null]})});let O=ze.get(null);z(()=>{if(C)return O.actions.push(o),()=>O.actions.pop(o)},[O,o,C]);let W=Oe(O,t.useCallback(e=>O.selectors.isTop(e,o),[O,o]));ot(W,I,e=>{e.preventDefault(),w()}),function(e,t=("undefined"!=typeof document?document.defaultView:null),n){let r=Le(e,"escape");st(t,"keydown",e=>{r&&(e.defaultPrevented||e.key===se.Escape&&n(e))})}(W,null==b?void 0:b.defaultView,e=>{e.preventDefault(),e.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur(),w()}),function(e,t,n=()=>[document.body]){pt(Le(e,"scroll-lock"),t,e=>{var t;return{containers:[...null!=(t=e.containers)?t:[],n]}})}(!u&&!F&&C,b,I),function(e,n,r){let i=T(e=>{let t=e.getBoundingClientRect();0===t.x&&0===t.y&&0===t.width&&0===t.height&&r()});t.useEffect(()=>{if(!e)return;let t=null===n?null:Z(n)?n:n.current;if(!t)return;let r=A();if("undefined"!=typeof ResizeObserver){let e=new ResizeObserver(()=>i.current(t));e.observe(t),r.add(()=>e.disconnect())}if("undefined"!=typeof IntersectionObserver){let e=new IntersectionObserver(()=>i.current(t));e.observe(t),r.add(()=>e.disconnect())}return()=>r.dispose()},[n,i,e])}(C,g,w);let[L,M]=function(){let[e,r]=t.useState([]);return[e.length>0?e.join(" "):void 0,t.useMemo(()=>function(e){let i=R(e=>(r(t=>[...t,e]),()=>r(t=>{let n=t.slice(),r=n.indexOf(e);return-1!==r&&n.splice(r,1),n}))),o=t.useMemo(()=>({register:i,slot:e.slot,name:e.name,props:e.props,value:e.value}),[i,e.slot,e.name,e.props,e.value]);return n.createElement(ne.Provider,{value:o},e.children)},[r])]}(),B=t.useMemo(()=>[{dialogState:y,close:w,setTitleId:S,unmount:p},v],[y,v,w,S,p]),G=t.useMemo(()=>({open:0===y}),[y]),U={ref:x,id:o,role:d,tabIndex:-1,"aria-modal":u?void 0:0===y||void 0,"aria-labelledby":v.titleId,"aria-describedby":L,unmount:p},H=!function(){var e;let[n]=t.useState(()=>"undefined"!=typeof window&&"function"==typeof window.matchMedia?window.matchMedia("(pointer: coarse)"):null),[r,i]=t.useState(null!=(e=null==n?void 0:n.matches)&&e);return z(()=>{if(n)return n.addEventListener("change",e),()=>n.removeEventListener("change",e);function e(e){i(e.matches)}},[n]),r}(),q=Ht.None;C&&!u&&(q|=Ht.RestoreFocus,q|=Ht.TabLock,c&&(q|=Ht.AutoFocus),H&&(q|=Ht.InitialFocus));let _=$();return n.createElement(St,null,n.createElement(At,{force:!0},n.createElement(Wt,null,n.createElement(cn.Provider,{value:B},n.createElement(Ot,{target:g},n.createElement(At,{force:!1},n.createElement(M,{slot:G},n.createElement(E,null,n.createElement(_t,{initialFocus:l,initialFocusFallback:g,containers:I,features:q},n.createElement(de,{value:w},_({ourProps:U,theirProps:f,slot:G,defaultTag:hn,features:mn,visible:0===y,name:"Dialog"})))))))))))}),hn="div",mn=L.RenderStrategy|L.Static;let gn=H(function(e,t){let{transition:r=!1,open:i,...o}=e,a=jt(),s=e.hasOwnProperty("open")||null!==a,l=e.hasOwnProperty("onClose");if(!s&&!l)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!s)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!l)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!a&&"boolean"!=typeof e.open)throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if("function"!=typeof e.onClose)throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return void 0===i&&!r||o.static?n.createElement(Mt,null,n.createElement(fn,{ref:t,open:i,...o})):n.createElement(Mt,null,n.createElement(an,{show:i,transition:r,unmount:o.unmount},n.createElement(fn,{ref:t,...o})))}),xn=H(function(e,r){let i=t.useId(),{id:o=`headlessui-dialog-panel-${i}`,transition:a=!1,...s}=e,[{dialogState:l,unmount:d},c]=un("Dialog.Panel"),u=te(r,c.panelRef),p=t.useMemo(()=>({open:0===l}),[l]),f={ref:u,id:o,onClick:R(e=>{e.stopPropagation()})},h=a?on:t.Fragment,m=a?{unmount:d}:{},g=$();return n.createElement(h,{...m},g({ourProps:f,theirProps:s,slot:p,defaultTag:"div",name:"Dialog.Panel"}))});H(function(e,r){let{transition:i=!1,...o}=e,[{dialogState:a,unmount:s}]=un("Dialog.Backdrop"),l=t.useMemo(()=>({open:0===a}),[a]),d={ref:r,"aria-hidden":!0},c=i?on:t.Fragment,u=i?{unmount:s}:{},p=$();return n.createElement(c,{...u},p({ourProps:d,theirProps:o,slot:l,defaultTag:"div",name:"Dialog.Backdrop"}))});let bn=H(function(e,n){let r=t.useId(),{id:i=`headlessui-dialog-title-${r}`,...o}=e,[{dialogState:a,setTitleId:s}]=un("Dialog.Title"),l=te(n);t.useEffect(()=>(s(i),()=>s(null)),[i,s]);let d=t.useMemo(()=>({open:0===a}),[a]),c={ref:l,id:i};return $()({ourProps:c,theirProps:o,slot:d,defaultTag:"h2",name:"Dialog.Title"})}),yn=Object.assign(gn,{Panel:xn,Title:bn,Description:oe});const vn=({isOpen:n,onClose:r,destination:i})=>{console.log("DestinationModal destination:",i);const[o,c]=t.useState(0),[u,p]=t.useState(!1);if(!n||!i)return null;const f=(()=>{if(i.image)return console.log("DestinationModal using image:",i.image),[i.image];const e=e=>(e||"unknown").toString().toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_\-]/g,""),t=(()=>{const e=i.province||i.region||"";if(!e)return"other";const t=e.toString().trim().toLowerCase();return{kpk:"kp","khyber pakhtunkhwa":"kp","gilgit-baltistan":"gilgit_baltistan","gilgit baltistan":"gilgit_baltistan",punjab:"punjab",sindh:"sindh",balochistan:"balochistan",islamabad:"islamabad"}[t]||t||"other"})()||"other",n=i.name||"unknown",r=e(t),o=e(n),a=["jpg","jpeg","png"];let s=[];return a.forEach(e=>{s.push(`/images/destinations/${r}/${o}.${e}`),s.push(`/images/destinations/${t}/${n}.${e}`)}),["punjab","kpk","gilgit-baltistan","balochistan","sindh","islamabad","azad-kashmir"].forEach(e=>{a.forEach(t=>{s.push(`/images/destinations/${e}/${o}.${t}`),s.push(`/images/destinations/${e}/${n}.${t}`)})}),console.log("DestinationModal all image paths tried:",s),s})();console.log("DestinationModal image paths tried:",f);return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:r}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full mx-4 relative z-10 overflow-hidden",children:[u?e.jsx("div",{className:"w-full h-64 bg-gray-200 flex items-center justify-center text-gray-400 rounded-t-2xl text-lg font-semibold",children:"No Image Available"}):e.jsx("img",{src:f[o],alt:i.name||"Destination",className:"w-full h-64 object-cover rounded-t-2xl",style:{objectPosition:"center"},onError:()=>{o<f.length-1?c(o+1):p(!0)}}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:i.name||"Untitled Destination"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(a,{className:"w-5 h-5 fill-yellow-400 text-yellow-400"}),e.jsx("span",{className:"text-base font-semibold",children:i.rating?.average?i.rating.average.toFixed(1):"New"})]})]}),e.jsxs("div",{className:"flex items-center text-gray-500 text-sm mb-2",children:[e.jsx(s,{className:"w-4 h-4 mr-1"}),(()=>{if(i.destinations&&i.destinations[0]&&i.destinations[0].location){const e=i.destinations[0].location;return"object"==typeof e?e.city||e.state||e.address||"Pakistan":e}if(i.location){const e=i.location;return"object"==typeof e?e.city||e.state||e.address||"Pakistan":e}return i.province?i.province:"Pakistan"})()]}),e.jsx("div",{className:"mb-2",children:e.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-white text-xs font-medium",style:{backgroundColor:(e=>{switch(e){case"adventure":return"#dc2626";case"cultural":return"#7c3aed";case"historical":return"#059669";case"nature":return"#10b981";case"religious":return"#d97706";default:return"#2563eb"}})(i.category)},children:i.category||"General"})}),e.jsx("p",{className:"text-gray-700 mb-4",children:i.description||"No description available."}),e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-500 mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(l,{className:"w-4 h-4 mr-1"}),i.duration?.days?`${i.duration.days} days`:"TBD"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(d,{className:"w-4 h-4 mr-1"}),"Max ",i.maxGroupSize||"N/A"]})]}),i.highlights&&i.highlights.length>0&&e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.highlights.slice(0,3).map((t,n)=>e.jsx("span",{className:"bg-blue-50 text-blue-700 px-2 py-1 rounded-lg text-xs font-medium",children:"object"==typeof t?JSON.stringify(t):t},n)),i.highlights.length>3&&e.jsxs("span",{className:"bg-gray-100 text-gray-600 px-2 py-1 rounded-lg text-xs font-medium",children:["+",i.highlights.length-3," more"]})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("span",{className:"text-2xl font-bold text-blue-600",children:["$","object"==typeof i.price&&i.price?.amount?i.price.amount:i.price||"TBD"]}),e.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"per person"})]}),e.jsx("button",{onClick:r,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-all w-full font-semibold",children:"Close"})]})]})]})},jn=({onClose:n,onSuccess:r})=>{const[o,a]=t.useState({name:"",description:"",province:"",location:"",category:"",price:"",duration:{days:""},maxGroupSize:"",highlights:"",image:""}),[s,l]=t.useState(null),[d,c]=t.useState(!1),[u,p]=t.useState(!1),[f,h]=t.useState(""),m=e=>{const{name:t,value:n}=e.target;t.startsWith("duration.")?a(e=>({...e,duration:{...e.duration,days:n}})):a(e=>({...e,[t]:n}))};t.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}),[]);const g=e.jsxs("div",{style:{position:"fixed",inset:0,zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center"},children:[e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.45)",zIndex:10001},onClick:n}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full p-8 relative",style:{zIndex:10002,border:"3px solid #2563eb",background:"#fff"},children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Add New Destination"}),e.jsxs("form",{onSubmit:async e=>{e.preventDefault(),p(!0),h("");try{const e=o.highlights?o.highlights.split(",").map(e=>e.trim()).filter(Boolean):[];if(!(await fetch("/api/destinations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...o,price:Number(o.price),maxGroupSize:Number(o.maxGroupSize),duration:{days:Number(o.duration.days)},highlights:e})})).ok)throw new Error("Failed to add destination");p(!1),r&&r(),n&&n()}catch(t){h(t.message||"Error adding destination"),p(!1)}},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-semibold",children:"Destination Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:async e=>{const t=e.target.files[0];if(!t)return;l(t),c(!0);const n=new FormData;n.append("image",t);try{const e=await fetch("/api/upload",{method:"POST",body:n}),t=await e.json();if(!t?.url&&!t?.path)throw new Error("Upload failed");a(e=>({...e,image:t.url||t.path}))}catch(r){}c(!1)},className:"mb-2"}),d&&e.jsx("div",{className:"text-blue-600 text-sm",children:"Uploading..."}),o.image&&e.jsx("img",{src:o.image,alt:"Preview",className:"w-32 h-24 object-cover rounded mb-2 border"})]}),e.jsx("input",{name:"name",value:o.name,onChange:m,placeholder:"Name",className:"w-full border p-2 rounded",required:!0}),e.jsx("textarea",{name:"description",value:o.description,onChange:m,placeholder:"Description",className:"w-full border p-2 rounded",required:!0}),e.jsx("input",{name:"province",value:o.province,onChange:m,placeholder:"Province/Region",className:"w-full border p-2 rounded",required:!0}),e.jsx("input",{name:"location",value:o.location,onChange:m,placeholder:"Location (city/state)",className:"w-full border p-2 rounded"}),e.jsx("input",{name:"category",value:o.category,onChange:m,placeholder:"Category",className:"w-full border p-2 rounded"}),e.jsx("input",{name:"price",type:"number",value:o.price,onChange:m,placeholder:"Price",className:"w-full border p-2 rounded",required:!0}),e.jsx("input",{name:"duration.days",type:"number",value:o.duration.days,onChange:m,placeholder:"Duration (days)",className:"w-full border p-2 rounded"}),e.jsx("input",{name:"maxGroupSize",type:"number",value:o.maxGroupSize,onChange:m,placeholder:"Max Group Size",className:"w-full border p-2 rounded"}),e.jsx("input",{name:"highlights",value:o.highlights,onChange:m,placeholder:"Highlights (comma separated)",className:"w-full border p-2 rounded"}),f&&e.jsx("div",{className:"text-red-600",children:f}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 rounded bg-gray-200",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:u,className:"px-4 py-2 rounded bg-blue-600 text-white font-semibold hover:bg-blue-700 transition-all",children:u?"Adding...":"Add Destination"})]})]})]})]});try{return i.createPortal(g,document.body)}catch{return g}},wn=[{id:"adventure",name:"Adventure"},{id:"cultural",name:"Cultural"},{id:"historical",name:"Historical"},{id:"religious",name:"Religious"},{id:"nature",name:"Nature"},{id:"heritage",name:"Heritage"}],Sn=[{id:"gilgit-baltistan",name:"Gilgit-Baltistan"},{id:"punjab",name:"Punjab"},{id:"sindh",name:"Sindh"},{id:"khyber pakhtunkhwa",name:"Khyber Pakhtunkhwa"},{id:"balochistan",name:"Balochistan"},{id:"azad kashmir",name:"Azad Kashmir"},{id:"islamabad",name:"Islamabad"}],Cn=({onClose:n,onTourAdded:r})=>{const[i,a]=t.useState({name:"",description:"",price:"",duration:"",category:"adventure",location:"gilgit-baltistan",maxGroupSize:"",images:[]}),[s,l]=t.useState(!1),[d,c]=t.useState(""),u=e=>{const{name:t,value:n,files:r}=e.target;a("images"===t?e=>({...e,images:Array.from(r)}):e=>({...e,[t]:n}))};return o.createPortal(e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs("div",{style:{background:"#fff",borderRadius:"12px",padding:"32px",width:"100%",maxWidth:"480px",boxShadow:"0 25px 50px -12px rgba(0,0,0,0.25)",position:"relative"},children:[e.jsx("h2",{style:{margin:0,marginBottom:24,fontSize:24,fontWeight:700,color:"#2563eb"},children:"Add New Tour"}),e.jsxs("form",{onSubmit:async e=>{e.preventDefault(),l(!0),c("");try{let e=[];if(i.images&&i.images.length>0)for(let n of i.images){const r=new FormData;r.append("image",n);try{const t=await fetch("/api/upload",{method:"POST",body:r});if(t.ok){const n=await t.json();n.url&&e.push(n.url)}}catch(t){}}if(!(await fetch("/api/tours",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:i.name,description:i.description,price:i.price,duration:{days:Number(i.duration)},category:i.category,location:i.location,maxGroupSize:i.maxGroupSize,images:e})})).ok)throw new Error("Failed to add tour");r&&r(),n()}catch(t){c("Failed to add tour. Please try again.")}finally{l(!1)}},style:{display:"flex",flexDirection:"column",gap:16},children:[e.jsx("input",{name:"name",type:"text",placeholder:"Tour Name",value:i.name,onChange:u,required:!0,style:{padding:12,borderRadius:8,border:"1px solid #e2e8f0",fontSize:16}}),e.jsx("textarea",{name:"description",placeholder:"Description",value:i.description,onChange:u,required:!0,style:{padding:12,borderRadius:8,border:"1px solid #e2e8f0",fontSize:16,minHeight:80}}),e.jsx("select",{name:"category",value:i.category,onChange:u,required:!0,style:{padding:12,borderRadius:8,border:"1px solid #e2e8f0",fontSize:16},children:wn.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))}),e.jsx("select",{name:"location",value:i.location,onChange:u,required:!0,style:{padding:12,borderRadius:8,border:"1px solid #e2e8f0",fontSize:16},children:Sn.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))}),e.jsx("input",{name:"price",type:"number",placeholder:"Price (USD)",value:i.price,onChange:u,required:!0,style:{padding:12,borderRadius:8,border:"1px solid #e2e8f0",fontSize:16}}),e.jsx("input",{name:"duration",type:"number",placeholder:"Duration (days)",value:i.duration,onChange:u,required:!0,min:1,style:{padding:12,borderRadius:8,border:"1px solid #e2e8f0",fontSize:16}}),e.jsx("input",{name:"maxGroupSize",type:"number",placeholder:"Max Group Size",value:i.maxGroupSize,onChange:u,required:!0,min:1,style:{padding:12,borderRadius:8,border:"1px solid #e2e8f0",fontSize:16}}),e.jsx("input",{name:"images",type:"file",accept:"image/*",onChange:u,multiple:!0,style:{fontSize:16}}),d&&e.jsx("div",{style:{color:"#dc2626",fontWeight:500},children:d}),e.jsx("button",{type:"submit",style:{background:"#2563eb",color:"white",border:"none",borderRadius:8,padding:12,fontWeight:600,fontSize:16,marginTop:8,cursor:"pointer"},disabled:s,children:s?"Adding...":"Add Tour"}),e.jsx("button",{type:"button",onClick:n,style:{background:"#f1f5f9",color:"#2563eb",border:"1px solid #e2e8f0",borderRadius:8,padding:12,fontWeight:600,fontSize:16,cursor:"pointer"},children:"Cancel"})]})]})}),document.body)},kn=()=>{const[n,r]=t.useState("dashboard"),[i,o]=t.useState(!0),[s,l]=t.useState(!1),[w,S]=t.useState({name:"Javaid Butt",email:"javaidbutt009@gmail.com",phone:"+92-300-1234567",profilePicture:null,role:"Administrator"}),[C,k]=t.useState(!1),[N,E]=t.useState({}),[A,P]=t.useState(!1),[z,T]=t.useState(!1),[R,D]=t.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[I,F]=t.useState(!1),[O,W]=t.useState([]),[L,M]=t.useState([]),[$,B]=t.useState([]),[G,U]=t.useState([]),[H,q]=t.useState(!1),[_,V]=t.useState(null),[Y,J]=t.useState(!1),[K,X]=t.useState({}),[Z,Q]=t.useState(!1),[ee,te]=t.useState(!1),[ne,re]=t.useState(null),[ie,oe]=t.useState(!1),[ae,se]=t.useState(""),[le,de]=t.useState(""),[ce,ue]=t.useState(""),[pe,fe]=t.useState(""),[he,me]=t.useState(""),[ge,xe]=t.useState(""),[be,ye]=t.useState({totalUsers:0,totalBookings:0,totalRevenue:0,monthlyGrowth:0}),[ve,je]=t.useState([]),[we,Se]=t.useState([]),[Ce,ke]=t.useState([]),[Ne,Ee]=t.useState([]),[Ae,Pe]=t.useState(!1),[ze,Te]=t.useState(null),[Re,De]=t.useState({});t.useEffect(()=>{console.log("🚀 AdminPanel useEffect triggered");(async()=>{try{console.log("🔐 Checking authentication...");if(!localStorage.getItem("token"))return console.error("❌ No authentication token found"),void o(!1);console.log("✅ Token found, fetching admin data..."),await Fe(),await Ie()}catch(e){console.error("💥 Error in AdminPanel initialization:",e),o(!1)}})()},[]);const Ie=async()=>{try{const e=localStorage.getItem("token");console.log("🔑 Token for guide apps:",e?"EXISTS":"MISSING"),console.log("📡 Fetching guide applications from:","https://tour-guide-web-portal.onrender.com/api/guide/applications");const t=await fetch("https://tour-guide-web-portal.onrender.com/api/guide/applications",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}});if(console.log("📥 Guide applications response status:",t.status),console.log("📥 Guide applications response ok:",t.ok),!t.ok){const e=await t.text();throw console.error("❌ Guide applications error response:",e),new Error(`HTTP ${t.status}: ${e}`)}const n=await t.json();if(console.log("📋 Guide applications full response:",n),console.log("📋 Applications array:",n.applications),n.success&&n.applications){const e=n.applications.map(e=>({id:e._id||e.id,name:`${e.firstName||""} ${e.lastName||""}`.trim()||"Name not provided",email:e.email||"Email not provided",phone:e.phone||"Phone not provided",experience:e.experience||"Experience not provided",specialization:(e.specializations||[]).join(", ")||"Not specified",status:e.status||"pending",appliedDate:e.applicationDate?new Date(e.applicationDate).toLocaleDateString():"Unknown",documents:e.certificationDocs||[],hourlyRate:e.hourlyRate||"Not specified",fullDayRate:e.fullDayRate||"Not specified",multiDayRate:e.multiDayRate||"Not specified",profilePhoto:e.profilePhoto,cnicPhoto:e.cnicPhoto,originalData:e}));W(e),console.log(`✅ Successfully loaded and transformed ${e.length} guide applications`),console.log("📋 Transformed applications:",e),U([{id:"ANN001",title:"New Safety Guidelines",message:"All guides must follow updated COVID-19 safety protocols during tours.",type:"guideline",createdDate:"2025-08-01",isActive:!0},{id:"ANN002",title:"Summer Special Discounts",message:"Enjoy 20% off on all mountain tours this summer season!",type:"promotion",createdDate:"2025-07-15",isActive:!0}])}else console.log("🔄 No guide applications found or API returned empty data"),W([]);const r=await fetch("https://tour-guide-web-portal.onrender.com/api/admin/reviews?status=pending",{headers:{Authorization:`Bearer ${e}`}}),i=await r.json();i.reviews&&M(i.reviews||[]);const o=await fetch("https://tour-guide-web-portal.onrender.com/api/admin/bookings",{headers:{Authorization:`Bearer ${e}`}}),a=await o.json();if(a.success){const e=(a.data?.bookings||[]).map(e=>{const t=e.paymentStatus||e.status||"N/A";return{id:e._id,tourist:e.user?.name||"N/A",tour:e.tour?.name||e.destination?.name||"N/A",guide:e.guide?.name||"N/A",amount:e.amount||e.totalPrice||0,stripeTransactionId:e.stripePaymentIntentId||e.paymentReference||"N/A",status:t,paymentStatus:e.paymentStatus||"N/A",date:e.createdAt?new Date(e.createdAt).toLocaleDateString():"N/A",refundStatus:e.refundStatus||"none"}});B(e)}U([{id:"ANN001",title:"New Safety Guidelines",message:"All guides must follow updated COVID-19 safety protocols during tours.",type:"guideline",createdDate:"2025-08-01",isActive:!0},{id:"ANN002",title:"Summer Special Discounts",message:"Enjoy 20% off on all mountain tours this summer season!",type:"promotion",createdDate:"2025-07-15",isActive:!0}])}catch(e){console.error("Error fetching admin management data:",e),W([]),M([]),B([]),U([])}},Fe=async()=>{try{console.log("🔄 Starting fetchAdminData...");const o=localStorage.getItem("token");console.log("Fetching admin data with token:",o?"Token exists":"No token");try{const e=await fetch("https://tour-guide-web-portal.onrender.com/api/admin/stats",{headers:{Authorization:`Bearer ${o}`}});console.log("Stats response status:",e.status);const t=await e.json();console.log("Stats data:",t),t.success&&ye(t.stats)}catch(e){console.error("Error fetching stats:",e),ye({totalUsers:0,totalBookings:0,totalRevenue:0,monthlyGrowth:0})}try{const e=await fetch("https://tour-guide-web-portal.onrender.com/api/admin/bookings",{headers:{Authorization:`Bearer ${o}`}});console.log("Bookings response status:",e.status);const t=await e.json();console.log("Bookings data:",t),t.success&&je(t.data.bookings||[])}catch(t){console.error("Error fetching bookings:",t),je([])}try{const e=await fetch("https://tour-guide-web-portal.onrender.com/api/admin/users",{headers:{Authorization:`Bearer ${o}`}});console.log("Users response status:",e.status);const t=await e.json();console.log("Users data:",t),t.success&&Se(t.data.users||[])}catch(n){console.error("Error fetching users:",n),Se([])}try{const e=await fetch("https://tour-guide-web-portal.onrender.com/api/admin/tours",{headers:{Authorization:`Bearer ${o}`}});console.log("Tours response status:",e.status);const t=await e.json();console.log("Tours data:",t),t.success&&t.tours&&ke(t.tours)}catch(r){console.error("Error fetching tours:",r)}try{console.log("Attempting to fetch all destinations from:","https://tour-guide-web-portal.onrender.com/api/destinations?limit=1000");const e=await fetch("https://tour-guide-web-portal.onrender.com/api/destinations?limit=1000");if(console.log("Destinations response status:",e.status),e.ok){const t=await e.json();console.log("Destinations data structure:",t),console.log("Destinations array length:",t.destinations?.length),t.destinations&&Array.isArray(t.destinations)?(Ee(t.destinations),console.log(`✅ Successfully loaded ${t.destinations.length} destinations`)):t.data&&Array.isArray(t.data)?(Ee(t.data),console.log(`✅ Successfully loaded ${t.data.length} destinations`)):Array.isArray(t)?(Ee(t),console.log(`✅ Successfully loaded ${t.length} destinations`)):(console.warn("⚠️ Unexpected destinations data structure:",t),Ee([]))}else{console.error("❌ Failed to fetch destinations. Status:",e.status);const t=await e.text();console.error("Error response:",t),Ee([])}}catch(i){console.error("❌ Error fetching destinations:",i),Ee([]),console.error("This could indicate the backend server is not running or there's a network issue")}try{const e=await fetch("https://tour-guide-web-portal.onrender.com/api/users/profile",{headers:{Authorization:`Bearer ${o}`}});if(e.ok){const t=await e.json();if(t.success&&t.data){const e=t.data;S({name:e.name||`${e.firstName} ${e.lastName}`.trim()||"Admin User",email:e.email||"javaidbutt009@gmail.com",phone:e.phone||"+92-300-1234567",profilePicture:e.avatar||null,role:"admin"===e.role?"Administrator":e.role||"Administrator"})}else S({name:"Javaid Butt",email:"javaidbutt009@gmail.com",phone:"+92-300-1234567",profilePicture:null,role:"Administrator"})}else S({name:"Javaid Butt",email:"javaidbutt009@gmail.com",phone:"+92-300-1234567",profilePicture:null,role:"Administrator"})}catch(a){console.error("❌ Error fetching profile data:",a),S({name:"Javaid Butt",email:"javaidbutt009@gmail.com",phone:"+92-300-1234567",profilePicture:null,role:"Administrator"})}}catch(s){console.error("Error fetching admin data:",s)}finally{o(!1)}},Oe=async(e,t,n="")=>{try{console.log(`🔄 Starting ${t} action for application ${e}`),console.log("🔍 Application ID type:",typeof e,"Value:",e),Q(!0);const i=localStorage.getItem("token");if(!i)return void alert("Authentication token not found. Please login again.");console.log(`📡 Making request to: https://tour-guide-web-portal.onrender.com/api/guide/applications/${e}/status`),console.log("📤 Request data:",{status:t,notes:n}),console.log("🔑 Token exists:",!!i);try{const e=await fetch("https://tour-guide-web-portal.onrender.com/api/health");console.log("🏥 Health check status:",e.status)}catch(r){throw console.error("❌ Backend health check failed:",r),new Error("Backend server is not reachable")}const o=await fetch(`https://tour-guide-web-portal.onrender.com/api/guide/applications/${e}/status`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify({status:t,notes:n})}).catch(e=>{throw console.error("🚨 Fetch failed completely:",e),new Error(`Network error: ${e.message}`)});if(console.log("📥 Response status:",o.status),console.log("📥 Response ok:",o.ok),!o.ok){const e=await o.text();throw console.error("❌ Response error text:",e),new Error(`HTTP ${o.status}: ${e}`)}const a=await o.json();console.log("📥 Response data:",a),a.success?(await Ie(),alert("Email has been sent to guide")):alert(`Error: ${a.message}`)}catch(i){console.error("❌ Error updating guide application:",i),alert("Error updating guide application: "+i.message)}finally{Q(!1)}},We=async(e,t)=>{try{Q(!0);const n=localStorage.getItem("token"),r=await fetch(`https://tour-guide-web-portal.onrender.com/api/admin/reviews/${e}/status`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({status:t})});await r.json()?(Ie(),q(!1),alert(`Review ${t} successfully!`)):alert("Error updating review status")}catch(n){console.error("Error updating review:",n),alert("Error updating review")}finally{Q(!1)}},Le=e=>{r(e),l(!1)};if(i)return e.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{width:"60px",height:"60px",border:"4px solid #e2e8f0",borderTop:"4px solid #3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 20px"}}),e.jsx("p",{children:"Loading admin panel..."})]})});return localStorage.getItem("token")?(console.log("🎨 AdminPanel about to render main content"),e.jsxs("div",{style:{minHeight:"100vh",backgroundColor:"#f8fafc"},children:[e.jsx("style",{children:"\n          .mobile-container {\n            padding: 16px;\n          }\n          \n          .desktop-container {\n            max-width: 1200px;\n            margin: 0 auto;\n            padding: 0 20px;\n          }\n\n          .mobile-header {\n            display: flex;\n            align-items: center;\n            justify-content: space-between;\n            margin-bottom: 16px;\n          }\n\n          .mobile-menu-button {\n            display: none;\n            background: none;\n            border: none;\n            padding: 8px;\n            cursor: pointer;\n            border-radius: 8px;\n            background-color: #f1f5f9;\n          }\n\n          .mobile-sidebar-overlay {\n            display: none;\n            position: fixed;\n            top: 0;\n            left: 0;\n            right: 0;\n            bottom: 0;\n            background-color: rgba(0, 0, 0, 0.5);\n            z-index: 998;\n          }\n\n          .mobile-sidebar {\n            position: fixed;\n            top: 0;\n            left: -100%;\n            width: 280px;\n            height: 100vh;\n            background: white;\n            z-index: 999;\n            transition: left 0.3s ease;\n            overflow-y: auto;\n          }\n\n          .mobile-sidebar.open {\n            left: 0;\n          }\n\n          .mobile-sidebar-header {\n            display: flex;\n            align-items: center;\n            justify-content: space-between;\n            padding: 16px;\n            border-bottom: 1px solid #e2e8f0;\n          }\n\n          .desktop-layout {\n            display: grid;\n            grid-template-columns: 250px 1fr;\n            gap: 40px;\n          }\n\n          .mobile-stats-grid {\n            display: grid;\n            grid-template-columns: 1fr;\n            gap: 16px;\n            margin-bottom: 24px;\n          }\n\n          .mobile-card {\n            background: white;\n            border-radius: 12px;\n            padding: 16px;\n            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n            border: 1px solid #e2e8f0;\n          }\n\n          .mobile-form-controls {\n            display: flex;\n            flex-direction: column;\n            gap: 12px;\n            margin-bottom: 16px;\n          }\n\n          .mobile-table-container {\n            overflow-x: auto;\n            -webkit-overflow-scrolling: touch;\n          }\n\n          .mobile-table {\n            min-width: 600px;\n          }\n\n          .mobile-application-card {\n            background: #fafafa;\n            border: 1px solid #e2e8f0;\n            border-radius: 12px;\n            padding: 16px;\n            margin-bottom: 16px;\n          }\n\n          .mobile-application-header {\n            display: flex;\n            flex-direction: column;\n            gap: 8px;\n            margin-bottom: 12px;\n          }\n\n          .mobile-application-details {\n            display: grid;\n            grid-template-columns: 1fr;\n            gap: 8px;\n            margin-bottom: 12px;\n          }\n\n          .mobile-application-actions {\n            display: flex;\n            flex-direction: column;\n            gap: 8px;\n            margin-top: 12px;\n          }\n\n          .mobile-action-button {\n            padding: 10px 16px;\n            border: none;\n            border-radius: 8px;\n            font-weight: 600;\n            cursor: pointer;\n            font-size: 14px;\n            width: 100%;\n          }\n\n          @media (max-width: 768px) {\n            .mobile-container {\n              padding: 12px;\n            }\n            \n            .desktop-container {\n              padding: 0 12px;\n            }\n\n            .mobile-menu-button {\n              display: block;\n            }\n\n            .desktop-layout {\n              display: block;\n            }\n\n            .mobile-sidebar-overlay.open {\n              display: block;\n            }\n\n            .mobile-stats-grid {\n              grid-template-columns: 1fr 1fr;\n              gap: 12px;\n            }\n\n            .mobile-form-controls {\n              gap: 8px;\n            }\n\n            .mobile-form-controls input,\n            .mobile-form-controls select {\n              font-size: 16px;\n            }\n\n            .mobile-application-details {\n              grid-template-columns: 1fr;\n            }\n          }\n\n          @media (max-width: 480px) {\n            .mobile-stats-grid {\n              grid-template-columns: 1fr;\n            }\n\n            .mobile-card {\n              padding: 12px;\n            }\n\n            .mobile-application-card {\n              padding: 12px;\n            }\n          }\n        "}),e.jsx("div",{style:{backgroundColor:"white",borderBottom:"1px solid #e2e8f0",padding:"20px 0"},children:e.jsx("div",{className:"desktop-container",children:e.jsxs("div",{className:"mobile-header",children:[e.jsxs("div",{children:[e.jsx("h1",{style:{margin:0,fontSize:"1.75rem",fontWeight:"600"},children:"Admin Panel"}),e.jsx("p",{style:{margin:"4px 0 0 0",color:"#64748b"},children:"Manage your Tour Guide platform"})]}),e.jsx("button",{className:"mobile-menu-button",onClick:()=>l(!0),children:e.jsx(c,{size:20})})]})})}),e.jsx("div",{className:"mobile-sidebar-overlay "+(s?"open":""),onClick:()=>l(!1)}),e.jsxs("div",{className:"mobile-sidebar "+(s?"open":""),children:[e.jsxs("div",{className:"mobile-sidebar-header",children:[e.jsx("h2",{style:{margin:0,fontSize:"1.25rem",fontWeight:"600"},children:"Menu"}),e.jsx("button",{style:{background:"none",border:"none",padding:"4px",cursor:"pointer"},onClick:()=>l(!1),children:e.jsx(u,{size:20})})]}),e.jsx("nav",{children:[{id:"dashboard",label:"Dashboard",icon:p},{id:"profile",label:"My Profile",icon:f},{id:"guide-applications",label:"Guide Applications",icon:d},{id:"destinations-management",label:"Destinations Management",icon:h},{id:"tour-management",label:"Tour Management",icon:m},{id:"booking-oversight",label:"Booking Oversight",icon:m},{id:"user-management",label:"User Management",icon:d},{id:"payment-oversight",label:"Payment Oversight",icon:g},{id:"announcements",label:"Announcements",icon:x},{id:"review-moderation",label:"Review Moderation",icon:a}].map(t=>{const r=t.icon;return e.jsxs("button",{onClick:()=>Le(t.id),style:{width:"100%",padding:"16px 20px",border:"none",backgroundColor:n===t.id?"#eff6ff":"transparent",color:n===t.id?"#2563eb":"#64748b",textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px",fontSize:"14px",fontWeight:n===t.id?"600":"400",borderLeft:n===t.id?"3px solid #2563eb":"3px solid transparent"},children:[e.jsx(r,{size:18}),t.label]},t.id)})})]}),e.jsxs("div",{className:"mobile-container",children:[e.jsxs("div",{className:"desktop-layout",children:[e.jsx("div",{style:{display:window.innerWidth<=768?"none":"block"},children:e.jsx("div",{className:"mobile-card",children:e.jsx("div",{style:{padding:"0"},children:e.jsx("nav",{children:[{id:"dashboard",label:"Dashboard",icon:p},{id:"profile",label:"My Profile",icon:f},{id:"guide-applications",label:"Guide Applications",icon:d},{id:"destinations-management",label:"Destinations Management",icon:h},{id:"tour-management",label:"Tour Management",icon:m},{id:"booking-oversight",label:"Booking Oversight",icon:m},{id:"user-management",label:"User Management",icon:d},{id:"payment-oversight",label:"Payment Oversight",icon:g},{id:"announcements",label:"Announcements",icon:x},{id:"review-moderation",label:"Review Moderation",icon:a}].map(t=>{const r=t.icon;return e.jsxs("button",{onClick:()=>Le(t.id),style:{width:"100%",padding:"16px 20px",border:"none",backgroundColor:n===t.id?"#eff6ff":"transparent",color:n===t.id?"#2563eb":"#64748b",textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px",fontSize:"14px",fontWeight:n===t.id?"600":"400",borderLeft:n===t.id?"3px solid #2563eb":"3px solid transparent"},children:[e.jsx(r,{size:18}),t.label]},t.id)})})})})}),e.jsxs("div",{children:["dashboard"===n&&e.jsxs("div",{children:[e.jsx("div",{className:"mobile-stats-grid",children:[{title:"Monthly Growth",value:"37.7%",icon:p,color:"#3b82f6",bg:"#eff6ff"},{title:"Total Revenue",value:$.reduce((e,t)=>e+(t.amount||0),0).toLocaleString(),icon:b,color:"#10b981",bg:"#ecfdf5"},{title:"Total Bookings",value:be.totalBookings||0,icon:m,color:"#8b5cf6",bg:"#faf5ff"},{title:"Total Users",value:be.totalUsers||0,icon:d,color:"#f59e0b",bg:"#fffbeb"}].map((t,n)=>{const r=t.icon;return e.jsx("div",{className:"mobile-card",children:e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{margin:0,fontSize:"14px",color:"#64748b"},children:t.title}),e.jsx("p",{style:{margin:"8px 0 0 0",fontSize:"1.5rem",fontWeight:"600",color:"#1e293b"},children:t.value})]}),e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"12px",backgroundColor:t.bg,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(r,{size:20,style:{color:t.color}})})]})},n)})}),e.jsxs("div",{className:"mobile-card",children:[e.jsx("h3",{style:{margin:"0 0 20px 0",fontSize:"1.25rem",fontWeight:"600"},children:"Recent Platform Activity"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth<=768?"1fr":"repeat(2, 1fr)",gap:"20px"},children:[e.jsxs("div",{children:[e.jsx("h4",{style:{margin:"0 0 15px 0",fontSize:"1rem",fontWeight:"600",color:"#f59e0b"},children:"Latest Guide Applications"}),e.jsx("div",{style:{display:"grid",gap:"10px"},children:O.slice(0,3).map(t=>e.jsxs("div",{style:{padding:"12px",border:"1px solid #fbbf24",borderRadius:"8px",backgroundColor:"#fffbeb"},children:[e.jsx("p",{style:{margin:"0 0 4px 0",fontWeight:"600",fontSize:"14px"},children:t.name}),e.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"12px",color:"#92400e"},children:t.specialization}),e.jsxs("p",{style:{margin:0,fontSize:"11px",color:"#78716c"},children:["Applied: ",t.appliedDate]})]},t.id))})]}),e.jsxs("div",{children:[e.jsx("h4",{style:{margin:"0 0 15px 0",fontSize:"1rem",fontWeight:"600",color:"#8b5cf6"},children:"Pending Review Approvals"}),e.jsx("div",{style:{display:"grid",gap:"10px"},children:L.slice(0,3).map(t=>e.jsxs("div",{style:{padding:"12px",border:"1px solid #c084fc",borderRadius:"8px",backgroundColor:"#faf5ff"},children:[e.jsx("p",{style:{margin:"0 0 4px 0",fontWeight:"600",fontSize:"14px"},children:t.tour}),e.jsxs("p",{style:{margin:"0 0 4px 0",fontSize:"12px",color:"#7c3aed"},children:["by ",t.tourist]}),e.jsxs("p",{style:{margin:0,fontSize:"11px",color:"#78716c"},children:["Rating: ",t.rating,"/5"]})]},t.id))})]})]})]})]}),"guide-applications"===n&&e.jsxs("div",{className:"mobile-card",children:[e.jsxs("h3",{style:{margin:"0 0 20px 0",fontSize:"1.25rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(d,{size:20,style:{color:"#2563eb"}}),"Guide Applications Management"]}),e.jsx("div",{style:{display:"grid",gap:"20px"},children:O.map(t=>e.jsxs("div",{className:"mobile-application-card",children:[e.jsx("div",{className:"mobile-application-header",children:e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx("h4",{style:{margin:0,fontSize:"18px",fontWeight:"600",color:"#1e293b"},children:t.name}),e.jsx("span",{style:{padding:"4px 12px",borderRadius:"12px",fontSize:"12px",fontWeight:"500",backgroundColor:"pending"===t.status?"#fef3c7":"approved"===t.status?"#dcfce7":"#fef2f2",color:"pending"===t.status?"#92400e":"approved"===t.status?"#166534":"#dc2626"},children:t.status.toUpperCase()})]})}),e.jsxs("div",{className:"mobile-application-details",children:[e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"12px",color:"#64748b",fontWeight:"600"},children:"Email"}),e.jsx("p",{style:{margin:"4px 0 0 0",fontSize:"14px",color:"#1e293b"},children:t.email})]}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"12px",color:"#64748b",fontWeight:"600"},children:"Phone"}),e.jsx("p",{style:{margin:"4px 0 0 0",fontSize:"14px",color:"#1e293b"},children:t.phone})]}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"12px",color:"#64748b",fontWeight:"600"},children:"Experience"}),e.jsx("p",{style:{margin:"4px 0 0 0",fontSize:"14px",color:"#1e293b"},children:t.experience})]}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"12px",color:"#64748b",fontWeight:"600"},children:"Specialization"}),e.jsx("p",{style:{margin:"4px 0 0 0",fontSize:"14px",color:"#1e293b"},children:t.specialization})]}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"12px",color:"#64748b",fontWeight:"600"},children:"Documents"}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"4px",marginTop:"4px"},children:t.documents.map(t=>e.jsx("span",{style:{padding:"2px 8px",borderRadius:"12px",fontSize:"12px",backgroundColor:"#eff6ff",color:"#2563eb"},children:t},t))})]}),e.jsxs("p",{style:{margin:"12px 0 0 0",fontSize:"12px",color:"#64748b"},children:["Applied on: ",t.appliedDate]})]}),"pending"===t.status&&e.jsxs("div",{className:"mobile-application-actions",children:[e.jsx("button",{className:"mobile-action-button",style:{backgroundColor:"#10b981",color:"white"},onClick:()=>Oe(t.id,"approved"),disabled:Z,children:Z?"Processing...":"Approve"}),e.jsx("button",{className:"mobile-action-button",style:{backgroundColor:"#dc2626",color:"white"},onClick:()=>Oe(t.id,"rejected"),disabled:Z,children:Z?"Processing...":"Reject"})]})]},t.id))})]}),"destinations-management"===n&&e.jsxs("div",{className:"mobile-card",children:[e.jsxs("div",{style:{display:"flex",flexDirection:window.innerWidth<=768?"column":"row",justifyContent:"space-between",alignItems:window.innerWidth<=768?"flex-start":"center",marginBottom:20,gap:window.innerWidth<=768?"12px":"0"},children:[e.jsxs("h3",{style:{margin:0,fontSize:"1.25rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(h,{size:20,style:{color:"#2563eb"}}),"Destinations Management (",(Ne||[]).length," destinations)"]}),e.jsxs("button",{className:"mobile-action-button",style:{backgroundColor:"#3b82f6",color:"white",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",width:window.innerWidth<=768?"100%":"auto",padding:"10px 20px"},onClick:()=>oe(!0),children:[e.jsx(y,{size:16}),"Add New Destination"]})]}),e.jsxs("div",{className:"mobile-form-controls",children:[e.jsx("input",{type:"text",placeholder:"Search destinations by name...",value:ae,onChange:e=>se(e.target.value),style:{padding:"12px",borderRadius:"8px",border:"1px solid #e2e8f0",width:"100%",fontSize:"16px"}}),e.jsxs("select",{value:le,onChange:e=>de(e.target.value),style:{padding:"12px",borderRadius:"8px",border:"1px solid #e2e8f0",width:"100%",fontSize:"16px"},children:[e.jsx("option",{value:"",children:"All Categories"}),Array.from(new Set((Ne||[]).map(e=>e.category).filter(Boolean))).map(t=>e.jsx("option",{value:t,children:t},t))]})]}),ie&&e.jsx(jn,{onClose:()=>oe(!1),onSuccess:()=>{oe(!1)}}),Ne&&0!==Ne.length?e.jsxs("div",{style:{display:"grid",gap:"16px"},children:[(Ne||[]).filter(e=>(!ae||e.name&&e.name.toLowerCase().includes(ae.toLowerCase()))&&(!le||e.category===le)).slice(0,20).map((t,n)=>e.jsx("div",{className:"mobile-application-card",children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx("h4",{style:{margin:0,fontSize:"18px",fontWeight:"600",color:"#1e293b"},children:t?.name||"Unknown Destination"}),e.jsx("span",{style:{padding:"4px 12px",borderRadius:"12px",fontSize:"12px",fontWeight:"500",backgroundColor:t?.isActive?"#dcfce7":"#fee2e2",color:t?.isActive?"#166534":"#dc2626"},children:t?.isActive?"ACTIVE":"INACTIVE"})]}),e.jsxs("div",{style:{display:"grid",gap:"8px"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"12px",color:"#64748b",fontWeight:"600"},children:"Category"}),e.jsx("p",{style:{margin:"4px 0 0 0",fontSize:"14px",color:"#1e293b"},children:t?.category||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"12px",color:"#64748b",fontWeight:"600"},children:"Location"}),e.jsxs("p",{style:{margin:"4px 0 0 0",fontSize:"14px",color:"#1e293b"},children:[t?.location?.city||t?.city||"N/A",", ",t?.location?.state||t?.state||"N/A"]})]}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"12px",color:"#64748b",fontWeight:"600"},children:"Rating"}),e.jsxs("p",{style:{margin:"4px 0 0 0",fontSize:"14px",color:"#1e293b"},children:["⭐ ","object"==typeof t?.rating?t.rating.average||t.rating.value||"N/A":"object"==typeof t?.averageRating?t.averageRating.average||t.averageRating.value||"N/A":t?.rating||t?.averageRating||"N/A",(t?.reviewCount||t?.rating?.count||t?.averageRating?.count)&&` (${t?.reviewCount||t?.rating?.count||t?.averageRating?.count} reviews)`]})]}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"12px",color:"#64748b",fontWeight:"600"},children:"Description"}),e.jsx("p",{style:{margin:"4px 0 0 0",fontSize:"14px",color:"#1e293b"},children:t?.description?t.description.substring(0,150)+"...":"No description available"})]}),t?.tags&&t.tags.length>0&&e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"12px",color:"#64748b",fontWeight:"600"},children:"Tags"}),e.jsx("div",{style:{display:"flex",gap:"4px",flexWrap:"wrap",marginTop:"4px"},children:t.tags.slice(0,3).map((t,n)=>e.jsx("span",{style:{padding:"4px 8px",backgroundColor:"#eff6ff",color:"#2563eb",borderRadius:"6px",fontSize:"12px"},children:t},n))})]})]}),e.jsx("button",{className:"mobile-action-button",style:{backgroundColor:"#3b82f6",color:"white",marginTop:"8px"},onClick:()=>(e=>{console.log("🏔️ View destination clicked:",e),console.log("🏔️ Destination name:",e?.name),console.log("🏔️ Modal state before:",ee);try{re(e),te(!0),console.log("🏔️ Modal should be opening now...")}catch(t){console.error("❌ Error in handleViewDestination:",t),alert(`Error: ${t.message}`)}})(t),children:"View Details"})]})},t?._id||n)),(Ne||[]).length>20&&e.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#64748b"},children:e.jsxs("p",{children:["Showing first 20 destinations. Total: ",Ne.length]})})]}):e.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#64748b"},children:[e.jsx(h,{size:48,style:{color:"#cbd5e1",margin:"0 auto 16px"}}),e.jsx("p",{children:"No destinations found. Check your database connection."}),e.jsxs("p",{style:{fontSize:"12px",marginTop:"8px"},children:["Backend Status: ",void 0===Ne?"Not loaded":"Empty response"]}),e.jsx("button",{onClick:()=>{console.log("Manual refresh clicked. Current allDestinations:",Ne),Fe()},className:"mobile-action-button",style:{backgroundColor:"#3b82f6",color:"white",marginTop:"16px"},children:"Refresh Data"})]})]}),"tour-management"===n&&e.jsxs("div",{className:"mobile-card",children:[e.jsxs("div",{style:{display:"flex",flexDirection:window.innerWidth<=768?"column":"row",justifyContent:"space-between",alignItems:window.innerWidth<=768?"flex-start":"center",marginBottom:20,gap:window.innerWidth<=768?"12px":"0"},children:[e.jsxs("h3",{style:{margin:0,fontSize:"1.25rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(m,{size:20,style:{color:"#2563eb"}}),"Tour Management"]}),e.jsxs("button",{className:"mobile-action-button",style:{backgroundColor:"#2563eb",color:"white",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",width:window.innerWidth<=768?"100%":"auto",padding:"10px 20px"},onClick:()=>{Te(null),De({}),Pe(!0)},children:[e.jsx(y,{size:16}),"Add New Tour"]})]}),e.jsxs("div",{className:"mobile-form-controls",children:[e.jsx("input",{type:"text",placeholder:"Search tours...",value:ce,onChange:e=>ue(e.target.value),style:{padding:"12px",borderRadius:"8px",border:"1px solid #e2e8f0",width:"100%",fontSize:"16px"}}),e.jsxs("select",{value:pe,onChange:e=>fe(e.target.value),style:{padding:"12px",borderRadius:"8px",border:"1px solid #e2e8f0",width:"100%",fontSize:"16px"},children:[e.jsx("option",{value:"",children:"All Categories"}),e.jsx("option",{value:"adventure",children:"Adventure"}),e.jsx("option",{value:"cultural",children:"Cultural"}),e.jsx("option",{value:"historical",children:"Historical"}),e.jsx("option",{value:"nature",children:"Nature"}),e.jsx("option",{value:"religious",children:"Religious"}),e.jsx("option",{value:"heritage",children:"Heritage"})]})]}),e.jsx("div",{className:"mobile-table-container",children:e.jsxs("table",{className:"mobile-table",style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:Nn,children:"Tour Name"}),e.jsx("th",{style:Nn,children:"Category"}),e.jsx("th",{style:Nn,children:"Price"}),e.jsx("th",{style:Nn,children:"Status"})]})}),e.jsx("tbody",{children:Ce.filter(e=>(!ce||e.name?.toLowerCase().includes(ce.toLowerCase()))&&(!pe||e.category===pe)).map(t=>e.jsxs("tr",{style:En,children:[e.jsx("td",{style:An,children:t.name}),e.jsx("td",{style:An,children:t.category}),e.jsxs("td",{style:An,children:["$",t.price?.toLocaleString()]}),e.jsx("td",{style:An,children:e.jsx("span",{style:{padding:"4px 12px",borderRadius:"9999px",fontSize:12,fontWeight:500,color:t.availability?.isActive?"#10b981":"#ef4444",background:t.availability?.isActive?"#ecfdf5":"#fef2f2"},children:t.availability?.isActive?"Active":"Inactive"})})]},t._id))})]})}),Ae&&e.jsx(Cn,{onClose:()=>Pe(!1),onTourAdded:()=>{}})]}),"booking-oversight"===n&&e.jsxs("div",{className:"mobile-card",children:[e.jsxs("h3",{style:{margin:"0 0 20px 0",fontSize:"1.25rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(m,{size:20,style:{color:"#2563eb"}}),"Booking Oversight & Management"]}),e.jsx("div",{className:"mobile-table-container",children:e.jsxs("table",{className:"mobile-table",style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:Nn,children:"Booking ID"}),e.jsx("th",{style:Nn,children:"Tourist"}),e.jsx("th",{style:Nn,children:"Tour"}),e.jsx("th",{style:Nn,children:"Destination"}),e.jsx("th",{style:Nn,children:"Date"}),e.jsx("th",{style:Nn,children:"Amount"}),e.jsx("th",{style:Nn,children:"Payment Status"})]})}),e.jsx("tbody",{children:ve.map(t=>e.jsxs("tr",{style:En,children:[e.jsx("td",{style:An,children:t._id}),e.jsx("td",{style:An,children:t.user?.name||"N/A"}),e.jsx("td",{style:An,children:t.tour?.name||"N/A"}),e.jsx("td",{style:An,children:t.destination?.name||"N/A"}),e.jsx("td",{style:An,children:t.startDate&&!isNaN(new Date(t.startDate))?new Date(t.startDate).toLocaleDateString():"N/A"}),e.jsxs("td",{style:An,children:["$ ",t.totalPrice]}),e.jsx("td",{style:An,children:e.jsx("span",{style:{padding:"4px 12px",borderRadius:"9999px",fontSize:"12px",fontWeight:"500",color:"paid"===t.paymentStatus?"#10b981":"#ef4444",background:"paid"===t.paymentStatus?"#ecfdf5":"#fef2f2"},children:"paid"===t.paymentStatus?"Paid":"Pending"})})]},t._id))})]})})]}),"review-moderation"===n&&e.jsxs("div",{className:"mobile-card",children:[e.jsxs("h3",{style:{margin:"0 0 20px 0",fontSize:"1.25rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(a,{size:20,style:{color:"#2563eb"}}),"⭐ Review Moderation"]}),e.jsx("div",{style:{display:"grid",gap:"20px"},children:L.map(t=>e.jsx("div",{className:"mobile-application-card",style:{borderLeft:"4px solid #fbbf24"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx("h4",{style:{margin:0,fontSize:"18px",fontWeight:"600",color:"#1e293b"},children:t.tour}),e.jsx("span",{style:{padding:"4px 12px",borderRadius:"12px",fontSize:"12px",fontWeight:"500",backgroundColor:"#fef3c7",color:"#92400e"},children:"PENDING"})]}),e.jsxs("div",{style:{display:"grid",gap:"8px"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"12px",color:"#64748b",fontWeight:"600"},children:"Tourist"}),e.jsx("p",{style:{margin:"4px 0 0 0",fontSize:"14px",color:"#1e293b"},children:t.tourist})]}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"12px",color:"#64748b",fontWeight:"600"},children:"Guide"}),e.jsx("p",{style:{margin:"4px 0 0 0",fontSize:"14px",color:"#1e293b"},children:t.guide})]}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"12px",color:"#64748b",fontWeight:"600"},children:"Rating"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",marginTop:"4px"},children:[[...Array(5)].map((n,r)=>e.jsx(a,{size:14,style:{color:r<t.rating?"#f59e0b":"#e5e7eb",fill:r<t.rating?"#f59e0b":"#e5e7eb"}},r)),e.jsxs("span",{style:{marginLeft:"4px",fontSize:"14px",color:"#1e293b"},children:["(",t.rating,"/5)"]})]})]}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"12px",color:"#64748b",fontWeight:"600"},children:"Comment"}),e.jsxs("p",{style:{margin:"4px 0 0 0",fontSize:"14px",color:"#1e293b",fontStyle:"italic"},children:['"',t.comment,'"']})]}),e.jsxs("p",{style:{margin:"8px 0 0 0",fontSize:"12px",color:"#64748b"},children:["Submitted: ",t.submittedDate]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",marginTop:"12px"},children:[e.jsx("button",{className:"mobile-action-button",style:{backgroundColor:"#3b82f6",color:"white"},onClick:()=>{V(t),q(!0)},children:"Review Details"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px"},children:[e.jsx("button",{className:"mobile-action-button",style:{backgroundColor:"#10b981",color:"white"},onClick:()=>We(t._id,"approved"),disabled:Z,children:Z?"Processing...":"Approve"}),e.jsx("button",{className:"mobile-action-button",style:{backgroundColor:"#dc2626",color:"white"},onClick:()=>We(t._id,"hidden"),disabled:Z,children:Z?"Processing...":"Hide"})]})]})]})},t.id))}),e.jsx(yn,{open:H,onClose:()=>q(!1),className:"fixed z-50 inset-0 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4",children:[e.jsx(yn.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),e.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-lg relative z-10 mx-4",style:{borderTop:"6px solid #2563eb"},children:[e.jsx(yn.Title,{className:"text-xl font-bold mb-4 text-blue-700",children:"Review Moderation"}),_&&e.jsxs("div",{style:{display:"grid",gap:"20px"},children:[e.jsxs("div",{children:[e.jsx("h4",{style:{margin:"0 0 8px 0",fontSize:"18px",fontWeight:"600"},children:_.tour}),e.jsxs("p",{style:{margin:"0 0 8px 0",color:"#64748b"},children:["Tourist: ",_.tourist]}),e.jsxs("p",{style:{margin:"0 0 12px 0",color:"#64748b"},children:["Guide: ",_.guide]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[e.jsx("span",{children:"Rating:"}),[...Array(5)].map((t,n)=>e.jsx(a,{size:16,style:{color:n<_.rating?"#f59e0b":"#e5e7eb",fill:n<_.rating?"#f59e0b":"#e5e7eb"}},n))]}),e.jsx("div",{style:{padding:"12px",backgroundColor:"#f8fafc",borderRadius:"8px",marginBottom:"20px"},children:e.jsxs("p",{style:{margin:0,fontStyle:"italic"},children:['"',_.comment,'"']})})]}),e.jsxs("div",{style:{display:"flex",flexDirection:window.innerWidth<=768?"column":"row",gap:"12px",justifyContent:"flex-end"},children:[e.jsx("button",{className:"mobile-action-button",style:{backgroundColor:"#10b981",color:"white"},disabled:Z,children:Z?"Processing...":"Approve Review"}),e.jsx("button",{className:"mobile-action-button",style:{backgroundColor:"#dc2626",color:"white"},disabled:Z,children:Z?"Processing...":"Reject Review"}),e.jsx("button",{onClick:()=>q(!1),className:"mobile-action-button",style:{backgroundColor:"#f1f5f9",color:"#2563eb",border:"1px solid #e2e8f0"},children:"Close"})]})]})]})]})})]}),"user-management"===n&&e.jsxs("div",{className:"mobile-card",children:[e.jsxs("h3",{style:{margin:"0 0 20px 0",fontSize:"1.25rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(d,{size:20,style:{color:"#2563eb"}}),"User Management"]}),e.jsxs("div",{className:"mobile-form-controls",children:[e.jsx("input",{type:"text",placeholder:"Search by name or email...",value:he,onChange:e=>me(e.target.value),style:{padding:"12px",borderRadius:"8px",border:"1px solid #e2e8f0",width:"100%",fontSize:"16px"}}),e.jsxs("select",{value:ge,onChange:e=>xe(e.target.value),style:{padding:"12px",borderRadius:"8px",border:"1px solid #e2e8f0",width:"100%",fontSize:"16px"},children:[e.jsx("option",{value:"",children:"All Roles"}),e.jsx("option",{value:"user",children:"Tourist"}),e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"guide",children:"Guide"})]})]}),e.jsx("div",{className:"mobile-table-container",children:e.jsxs("table",{className:"mobile-table",style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:Nn,children:"ID"}),e.jsx("th",{style:Nn,children:"Name"}),e.jsx("th",{style:Nn,children:"Email"}),e.jsx("th",{style:Nn,children:"Role"}),e.jsx("th",{style:Nn,children:"Join Date"}),e.jsx("th",{style:Nn,children:"Status"})]})}),e.jsx("tbody",{children:we.filter(e=>(!he||e.name?.toLowerCase().includes(he.toLowerCase())||e.email?.toLowerCase().includes(he.toLowerCase()))&&(!ge||e.role===ge)).map(t=>e.jsxs("tr",{style:En,children:[e.jsx("td",{style:An,children:t._id}),e.jsx("td",{style:An,children:t.name}),e.jsx("td",{style:An,children:t.email}),e.jsx("td",{style:An,children:e.jsx("span",{style:{padding:"2px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:"500",backgroundColor:"admin"===t.role?"#dcfce7":"guide"===t.role?"#eff6ff":"#fef3c7",color:"admin"===t.role?"#166534":"guide"===t.role?"#2563eb":"#92400e"},children:t.role})}),e.jsx("td",{style:An,children:t.createdAt?new Date(t.createdAt).toLocaleDateString():"N/A"}),e.jsx("td",{style:An,children:e.jsx("span",{style:{padding:"4px 12px",borderRadius:"9999px",fontSize:"12px",fontWeight:"500",color:t.isActive?"#10b981":"#ef4444",background:t.isActive?"#ecfdf5":"#fef2f2"},children:t.isActive?"Active":"Blocked"})})]},t._id))})]})})]}),"payment-oversight"===n&&e.jsxs("div",{className:"mobile-card",children:[e.jsxs("h3",{style:{margin:"0 0 20px 0",fontSize:"1.25rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(g,{size:20,style:{color:"#2563eb"}}),"💳 Payment Oversight & Monitoring"]}),e.jsxs("div",{style:{marginBottom:"16px",fontSize:"14px",color:"#64748b",lineHeight:"1.5"},children:["Total Revenue: ",e.jsxs("span",{style:{color:"#10b981",fontWeight:600},children:["$ ",$.reduce((e,t)=>e+t.amount,0).toLocaleString()]}),e.jsx("br",{}),"Successful Payments: ",e.jsx("span",{style:{color:"#2563eb",fontWeight:600},children:$.filter(e=>"paid"===e.paymentStatus).length}),e.jsx("br",{}),"Failed/Refunds: ",e.jsx("span",{style:{color:"#dc2626",fontWeight:600},children:$.filter(e=>"failed"===e.paymentStatus||"none"!==e.refundStatus).length})]}),e.jsx("div",{className:"mobile-table-container",children:e.jsxs("table",{className:"mobile-table",style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:Nn,children:"Payment ID"}),e.jsx("th",{style:Nn,children:"Tourist"}),e.jsx("th",{style:Nn,children:"Tour"}),e.jsx("th",{style:Nn,children:"Guide"}),e.jsx("th",{style:Nn,children:"Amount"}),e.jsx("th",{style:Nn,children:"Stripe Transaction"}),e.jsx("th",{style:Nn,children:"Status"}),e.jsx("th",{style:Nn,children:"Date"})]})}),e.jsx("tbody",{children:$.map(t=>e.jsxs("tr",{style:En,children:[e.jsx("td",{style:An,children:t.id}),e.jsx("td",{style:An,children:t.tourist}),e.jsx("td",{style:An,children:t.tour}),e.jsx("td",{style:An,children:t.guide}),e.jsxs("td",{style:An,children:["$ ",t.amount.toLocaleString()]}),e.jsx("td",{style:An,children:t.stripeTransactionId}),e.jsx("td",{style:An,children:e.jsx("span",{style:{padding:"4px 12px",borderRadius:"9999px",fontSize:"12px",fontWeight:"500",color:"white",backgroundColor:"paid"===t.paymentStatus?"#10b981":"pending"===t.paymentStatus?"#f59e0b":"#dc2626"},children:t.paymentStatus})}),e.jsx("td",{style:An,children:t.date})]},t.id))})]})})]}),"announcements"===n&&e.jsxs("div",{className:"mobile-card",children:[e.jsxs("div",{style:{display:"flex",flexDirection:window.innerWidth<=768?"column":"row",justifyContent:"space-between",alignItems:window.innerWidth<=768?"flex-start":"center",marginBottom:20,gap:window.innerWidth<=768?"12px":"0"},children:[e.jsxs("h3",{style:{margin:0,fontSize:"1.25rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(x,{size:20,style:{color:"#2563eb"}}),"📢 Platform Announcements"]}),e.jsxs("button",{className:"mobile-action-button",style:{backgroundColor:"#2563eb",color:"white",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",width:window.innerWidth<=768?"100%":"auto",padding:"10px 20px"},onClick:()=>{X({}),J(!0)},children:[e.jsx(y,{size:16}),"Create Announcement"]})]}),e.jsx("div",{style:{display:"grid",gap:"20px"},children:G.map(t=>e.jsx("div",{className:"mobile-application-card",style:{borderLeft:"4px solid "+("guideline"===t.type?"#2563eb":"promotion"===t.type?"#10b981":"#f59e0b")},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:window.innerWidth<=768?"column":"row",alignItems:window.innerWidth<=768?"flex-start":"center",justifyContent:"space-between",gap:"8px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",flexWrap:"wrap"},children:[e.jsx("h4",{style:{margin:0,fontSize:"18px",fontWeight:"600",color:"#1e293b"},children:t.title}),e.jsx("span",{style:{padding:"2px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:"500",backgroundColor:"guideline"===t.type?"#eff6ff":"promotion"===t.type?"#ecfdf5":"#fef3c7",color:"guideline"===t.type?"#2563eb":"promotion"===t.type?"#10b981":"#f59e0b"},children:t.type})]}),e.jsx("span",{style:{padding:"4px 12px",borderRadius:"12px",fontSize:"12px",fontWeight:"500",backgroundColor:t.isActive?"#dcfce7":"#fef2f2",color:t.isActive?"#166534":"#dc2626"},children:t.isActive?"ACTIVE":"INACTIVE"})]}),e.jsx("p",{style:{margin:0,fontSize:"14px",color:"#64748b"},children:t.message}),e.jsxs("p",{style:{margin:0,fontSize:"12px",color:"#94a3b8"},children:["Created: ",t.createdDate]}),e.jsxs("div",{style:{display:"flex",flexDirection:window.innerWidth<=768?"column":"row",gap:"8px",marginTop:"8px"},children:[e.jsx("button",{className:"mobile-action-button",style:{backgroundColor:"#3b82f6",color:"white"},children:"Edit"}),e.jsx("button",{className:"mobile-action-button",style:{backgroundColor:t.isActive?"#ef4444":"#10b981",color:"white"},children:t.isActive?"Deactivate":"Activate"}),e.jsx("button",{className:"mobile-action-button",style:{backgroundColor:"#dc2626",color:"white"},children:"Delete"})]})]})},t.id))}),e.jsx(yn,{open:Y,onClose:()=>J(!1),className:"fixed z-50 inset-0 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4",children:[e.jsx(yn.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),e.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-lg relative z-10 mx-4",style:{borderTop:"6px solid #2563eb"},children:[e.jsx(yn.Title,{className:"text-xl font-bold mb-4 text-blue-700",children:"Create Platform Announcement"}),e.jsx("form",{onSubmit:async e=>{e.preventDefault(),Q(!0),setTimeout(()=>{Q(!1),J(!1),X({})},1e3)},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[e.jsx("input",{type:"text",value:K.title||"",onChange:e=>X(t=>({...t,title:e.target.value})),placeholder:"Announcement Title",style:{padding:"12px",borderRadius:"8px",border:"1px solid #e2e8f0",fontSize:"16px"},required:!0}),e.jsxs("select",{value:K.type||"",onChange:e=>X(t=>({...t,type:e.target.value})),style:{padding:"12px",borderRadius:"8px",border:"1px solid #e2e8f0",fontSize:"16px"},required:!0,children:[e.jsx("option",{value:"",children:"Select Type"}),e.jsx("option",{value:"guideline",children:"Guideline"}),e.jsx("option",{value:"promotion",children:"Promotion"}),e.jsx("option",{value:"maintenance",children:"Maintenance"}),e.jsx("option",{value:"general",children:"General"})]}),e.jsx("textarea",{value:K.message||"",onChange:e=>X(t=>({...t,message:e.target.value})),placeholder:"Announcement Message",style:{padding:"12px",borderRadius:"8px",border:"1px solid #e2e8f0",minHeight:100,fontSize:"16px"},required:!0}),e.jsx("button",{type:"submit",className:"mobile-action-button",style:{background:"#2563eb",color:"white",marginTop:8},disabled:Z,children:Z?"Creating...":"Create Announcement"}),e.jsx("button",{type:"button",onClick:()=>J(!1),className:"mobile-action-button",style:{background:"#f1f5f9",color:"#2563eb",border:"1px solid #e2e8f0"},children:"Cancel"})]})})]})]})})]}),"profile"===n&&e.jsxs("div",{className:"mobile-card",children:[e.jsxs("h3",{style:{margin:"0 0 20px 0",fontSize:"1.25rem",fontWeight:"600",color:"#1e293b",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(f,{size:20,style:{color:"#2563eb"}}),"My Profile"]}),e.jsxs("div",{style:{backgroundColor:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"12px",padding:"16px",marginBottom:"20px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"16px",flexDirection:window.innerWidth<=480?"column":"row",textAlign:window.innerWidth<=480?"center":"left"},children:[e.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"50%",backgroundColor:"#2563eb",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"20px",fontWeight:"600"},children:w.name?w.name.charAt(0).toUpperCase():"A"}),e.jsxs("div",{children:[e.jsx("h4",{style:{margin:"0 0 4px 0",fontSize:"18px",fontWeight:"600",color:"#1e293b"},children:w.name||"Admin User"}),e.jsx("p",{style:{margin:"0 0 8px 0",fontSize:"14px",color:"#64748b"},children:w.email||"admin@example.com"}),e.jsx("span",{style:{padding:"4px 12px",borderRadius:"16px",fontSize:"12px",fontWeight:"500",backgroundColor:"#dcfce7",color:"#166534"},children:"Administrator"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth<=480?"1fr":"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#64748b",display:"block",marginBottom:"4px"},children:"Phone Number"}),e.jsx("p",{style:{margin:0,fontSize:"14px",color:"#1e293b"},children:w.phone||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"#64748b",display:"block",marginBottom:"4px"},children:"Role"}),e.jsx("p",{style:{margin:0,fontSize:"14px",color:"#1e293b"},children:w.role||"Administrator"})]})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:window.innerWidth<=480?"column":"row",gap:"12px"},children:[e.jsxs("button",{className:"mobile-action-button",style:{backgroundColor:"#2563eb",color:"white",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},onClick:()=>{E({name:w.name||"",phone:w.phone||""}),k(!0)},children:[e.jsx(v,{size:16}),"Edit Profile"]}),e.jsxs("button",{className:"mobile-action-button",style:{backgroundColor:"#3b82f6",color:"white",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},onClick:()=>{D({currentPassword:"",newPassword:"",confirmPassword:""}),T(!0)},children:[e.jsx(j,{size:16}),"Change Password"]})]})]})]})]}),C&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"16px"},children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",width:"100%",maxWidth:"400px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)",borderTop:"6px solid #2563eb"},children:[e.jsx("h2",{style:{margin:"0 0 24px 0",fontSize:"1.5rem",fontWeight:"700",color:"#2563eb"},children:"Edit Profile"}),e.jsx("form",{onSubmit:async e=>{e.preventDefault(),P(!0);try{const e=localStorage.getItem("token");console.log("🔄 Attempting to update profile..."),console.log("📤 Profile data being sent:",{name:N.name,phone:N.phone});const t=await fetch("http://localhost:5000/api/users/profile",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({name:N.name,phone:N.phone})});console.log("📥 Response status:",t.status),console.log("📥 Response ok:",t.ok);const n=await t.json();if(console.log("📥 Response data:",n),t.ok&&n.success){if(n.data){const e=n.data;S({name:e.name||`${e.firstName} ${e.lastName}`.trim()||"Admin User",email:e.email||w.email,phone:e.phone||w.phone,profilePicture:e.avatar||w.profilePicture,role:e.role||w.role})}alert("Profile updated successfully"),k(!1)}else alert("❌ Backend error: "+(n.message||"Failed to update profile"))}catch(t){console.error("❌ Profile update API error:",t),alert("❌ Failed to connect to backend. Please check if the server is running.")}finally{P(!1)}},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsx("input",{type:"text",value:N.name||"",onChange:e=>E(t=>({...t,name:e.target.value})),placeholder:"Full Name",style:{padding:"12px",borderRadius:"8px",border:"1px solid #e2e8f0",fontSize:"16px"},required:!0}),e.jsx("input",{type:"tel",value:N.phone||"",onChange:e=>E(t=>({...t,phone:e.target.value})),placeholder:"Phone Number",style:{padding:"12px",borderRadius:"8px",border:"1px solid #e2e8f0",fontSize:"16px"}}),e.jsx("button",{type:"submit",className:"mobile-action-button",style:{background:"#2563eb",color:"white",marginTop:"8px"},disabled:A,children:A?"Saving...":"Save Changes"}),e.jsx("button",{type:"button",onClick:()=>k(!1),className:"mobile-action-button",style:{background:"#f1f5f9",color:"#2563eb",border:"1px solid #e2e8f0"},children:"Cancel"})]})})]})}),z&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"16px"},children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",width:"100%",maxWidth:"400px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)",borderTop:"6px solid #3b82f6"},children:[e.jsx("h2",{style:{margin:"0 0 24px 0",fontSize:"1.5rem",fontWeight:"700",color:"#3b82f6"},children:"Change Password"}),e.jsx("form",{onSubmit:async e=>{if(e.preventDefault(),R.newPassword===R.confirmPassword)if(R.newPassword.length<6)alert("Password must be at least 6 characters long!");else{F(!0);try{const e=localStorage.getItem("token");console.log("🔄 Attempting to change password...");const t=await fetch("http://localhost:5000/api/users/password",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({currentPassword:R.currentPassword,newPassword:R.newPassword})});console.log("📥 Password change response status:",t.status),console.log("📥 Password change response ok:",t.ok);const n=await t.json();if(console.log("📥 Password change response data:",n),t.ok&&n.success)alert("Password changed successfully!"),D({currentPassword:"",newPassword:"",confirmPassword:""}),T(!1);else{console.error("Password change failed:",{status:t.status,statusText:t.statusText,data:n});let e=n.message||"Failed to change password";400===t.status?e.includes("Current password is incorrect")?e="Current password is incorrect. Please try again.":e.includes("required")&&(e="Please fill in all password fields."):404===t.status?e="User not found. Please try logging in again.":500===t.status&&(e="Server error. Please try again later."),alert("❌ "+e)}}catch(t){console.error("❌ Password change API error:",t),alert("❌ Failed to connect to backend. Please check if the server is running.")}finally{F(!1)}}else alert("New passwords don't match!")},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsx("input",{type:"password",value:R.currentPassword,onChange:e=>D(t=>({...t,currentPassword:e.target.value})),placeholder:"Current Password",style:{padding:"12px",borderRadius:"8px",border:"1px solid #e2e8f0",fontSize:"16px"},required:!0}),e.jsx("input",{type:"password",value:R.newPassword,onChange:e=>D(t=>({...t,newPassword:e.target.value})),placeholder:"New Password (min 6 characters)",style:{padding:"12px",borderRadius:"8px",border:"1px solid #e2e8f0",fontSize:"16px"},required:!0,minLength:"6"}),e.jsx("input",{type:"password",value:R.confirmPassword,onChange:e=>D(t=>({...t,confirmPassword:e.target.value})),placeholder:"Confirm New Password",style:{padding:"12px",borderRadius:"8px",border:"1px solid #e2e8f0",fontSize:"16px"},required:!0,minLength:"6"}),e.jsx("button",{type:"submit",className:"mobile-action-button",style:{background:"#3b82f6",color:"white",marginTop:"8px"},disabled:I,children:I?"Changing...":"Change Password"}),e.jsx("button",{type:"button",onClick:()=>{T(!1),D({currentPassword:"",newPassword:"",confirmPassword:""})},className:"mobile-action-button",style:{background:"#f1f5f9",color:"#3b82f6",border:"1px solid #e2e8f0"},children:"Cancel"})]})})]})})]}),e.jsx(vn,{isOpen:ee,onClose:()=>te(!1),destination:ne}),e.jsx("style",{children:"\n          @keyframes spin {\n            0% { transform: rotate(0deg); }\n            100% { transform: rotate(360deg); }\n          }\n        "})]})):e.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("h2",{children:"Authentication Required"}),e.jsx("p",{children:"Please log in to access the admin panel."}),e.jsx("button",{onClick:()=>window.location.href="/",style:{padding:"10px 20px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"5px"},children:"Go to Login"})]})})},Nn={padding:"12px 16px",textAlign:"left",backgroundColor:"#f1f5f9",color:"#64748b",fontSize:"12px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em"},En={borderBottom:"1px solid #e2e8f0"},An={padding:"12px 16px",fontSize:"14px",color:"#334155"};export{kn as default};
